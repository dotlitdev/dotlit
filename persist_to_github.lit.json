{
    "type": "root",
    "children": [
        {
            "type": "section",
            "data": {
                "name": "persist-to-github",
                "hName": "section",
                "hProperties": {
                    "depth": 1
                }
            },
            "depth": 1,
            "children": [
                {
                    "type": "cell",
                    "position": {
                        "start": {
                            "line": 1,
                            "column": 1,
                            "offset": 0
                        },
                        "end": {
                            "line": 5,
                            "column": 24,
                            "offset": 123
                        }
                    },
                    "data": {
                        "hName": "cell",
                        "hProperties": {
                            "class": "cell"
                        },
                        "section": {
                            "position": {
                                "start": {
                                    "line": 1,
                                    "column": 1,
                                    "offset": 0
                                },
                                "end": {
                                    "line": 18,
                                    "column": 4,
                                    "offset": 357
                                }
                            }
                        }
                    },
                    "children": [
                        {
                            "type": "heading",
                            "depth": 1,
                            "children": [
                                {
                                    "type": "text",
                                    "value": "Persist to GitHub",
                                    "position": {
                                        "start": {
                                            "line": 1,
                                            "column": 3,
                                            "offset": 2
                                        },
                                        "end": {
                                            "line": 1,
                                            "column": 20,
                                            "offset": 19
                                        }
                                    }
                                }
                            ],
                            "position": {
                                "start": {
                                    "line": 1,
                                    "column": 1,
                                    "offset": 0
                                },
                                "end": {
                                    "line": 5,
                                    "column": 24,
                                    "offset": 123
                                }
                            },
                            "data": {
                                "hProperties": {
                                    "id": "persist-to-github"
                                },
                                "id": "persist-to-github"
                            },
                            "processed": true
                        },
                        {
                            "type": "paragraph",
                            "children": [
                                {
                                    "type": "text",
                                    "value": "Assuming you generate a personal access token and store it in ",
                                    "position": {
                                        "start": {
                                            "line": 3,
                                            "column": 1,
                                            "offset": 21
                                        },
                                        "end": {
                                            "line": 3,
                                            "column": 63,
                                            "offset": 83
                                        }
                                    }
                                },
                                {
                                    "type": "inlineCode",
                                    "value": "localStorage",
                                    "position": {
                                        "start": {
                                            "line": 3,
                                            "column": 63,
                                            "offset": 83
                                        },
                                        "end": {
                                            "line": 3,
                                            "column": 77,
                                            "offset": 97
                                        }
                                    }
                                },
                                {
                                    "type": "text",
                                    "value": ".",
                                    "position": {
                                        "start": {
                                            "line": 3,
                                            "column": 77,
                                            "offset": 97
                                        },
                                        "end": {
                                            "line": 3,
                                            "column": 78,
                                            "offset": 98
                                        }
                                    }
                                }
                            ],
                            "position": {
                                "start": {
                                    "line": 3,
                                    "column": 1,
                                    "offset": 21
                                },
                                "end": {
                                    "line": 3,
                                    "column": 78,
                                    "offset": 98
                                }
                            }
                        },
                        {
                            "type": "paragraph",
                            "children": [
                                {
                                    "type": "text",
                                    "value": "See Help > GitHub Token",
                                    "position": {
                                        "start": {
                                            "line": 5,
                                            "column": 1,
                                            "offset": 100
                                        },
                                        "end": {
                                            "line": 5,
                                            "column": 24,
                                            "offset": 123
                                        }
                                    }
                                }
                            ],
                            "position": {
                                "start": {
                                    "line": 5,
                                    "column": 1,
                                    "offset": 100
                                },
                                "end": {
                                    "line": 5,
                                    "column": 24,
                                    "offset": 123
                                }
                            }
                        }
                    ]
                },
                {
                    "type": "cell",
                    "position": {
                        "start": {
                            "line": 7,
                            "column": 1,
                            "offset": 125
                        },
                        "end": {
                            "line": 9,
                            "column": 4,
                            "offset": 180
                        }
                    },
                    "data": {
                        "hName": "cell",
                        "hProperties": {
                            "class": "cell"
                        }
                    },
                    "children": [
                        {
                            "type": "code",
                            "lang": "js",
                            "meta": null,
                            "value": "localStorage.setItem('ghToken', 'YOUR_TOKEN')",
                            "position": {
                                "start": {
                                    "line": 7,
                                    "column": 1,
                                    "offset": 125
                                },
                                "end": {
                                    "line": 9,
                                    "column": 4,
                                    "offset": 180
                                }
                            },
                            "data": {
                                "meta": {
                                    "attrs": {},
                                    "lang": "js",
                                    "isOutput": false,
                                    "hasOutput": false,
                                    "hasSource": false,
                                    "raw": "js"
                                },
                                "hProperties": {
                                    "className": "",
                                    "meta": {
                                        "attrs": {},
                                        "lang": "js",
                                        "isOutput": false,
                                        "hasOutput": false,
                                        "hasSource": false,
                                        "raw": "js"
                                    }
                                }
                            }
                        }
                    ]
                },
                {
                    "type": "cell",
                    "position": {
                        "start": {
                            "line": 11,
                            "column": 1,
                            "offset": 182
                        },
                        "end": {
                            "line": 11,
                            "column": 50,
                            "offset": 231
                        }
                    },
                    "data": {
                        "hName": "cell",
                        "hProperties": {
                            "class": "cell"
                        },
                        "section": {
                            "position": {
                                "start": {
                                    "line": 1,
                                    "column": 1,
                                    "offset": 0
                                },
                                "end": {
                                    "line": 18,
                                    "column": 4,
                                    "offset": 357
                                }
                            }
                        }
                    },
                    "children": [
                        {
                            "type": "paragraph",
                            "children": [
                                {
                                    "type": "text",
                                    "value": "Then, thanks to the below, it should just-work™️.",
                                    "position": {
                                        "start": {
                                            "line": 11,
                                            "column": 1,
                                            "offset": 182
                                        },
                                        "end": {
                                            "line": 11,
                                            "column": 50,
                                            "offset": 231
                                        }
                                    }
                                }
                            ],
                            "position": {
                                "start": {
                                    "line": 11,
                                    "column": 1,
                                    "offset": 182
                                },
                                "end": {
                                    "line": 11,
                                    "column": 50,
                                    "offset": 231
                                }
                            }
                        }
                    ]
                },
                {
                    "type": "cell",
                    "position": {
                        "start": {
                            "line": 13,
                            "column": 1,
                            "offset": 233
                        },
                        "end": {
                            "line": 15,
                            "column": 4,
                            "offset": 301
                        }
                    },
                    "data": {
                        "hName": "cell",
                        "hProperties": {
                            "class": "cell"
                        }
                    },
                    "children": [
                        {
                            "type": "code",
                            "lang": "js",
                            "meta": "#implementation !collapse < utils/fs-promises-gh-utils.js",
                            "value": "import { b64EncodeUnicode, b64DecodeUnicode } from './safe-encoders'\nimport { getConsoleForNamespace } from './console'\n\nconst console = getConsoleForNamespace('fs/gh')\n\nconst getEndpoint = (opts,file) => `https://api.github.com/repos/${opts.username}/${opts.repository}/contents/${file}`\n\nexport const ghReadFile = opts => async (...args) => {\n    const file = (opts.prefix || '') + args[0]\n    const params = {\n        method: \"GET\",\n        headers: {\n            \"Authorization\": `token ${opts.token}`,\n            'Content-Type': 'application/json'\n        },\n    }\n    const resp = await fetch(getEndpoint(opts,file), params)\n    // resp.origJson = resp.json\n    resp.text = async () => {\n        console.log(\"ghReadFile text()...\")\n        const data = await resp.json()\n        console.log(\"ghReadFile data\", data)\n        const content = b64DecodeUnicode(data.content)\n        console.log(\"ghReadFile decoded\", content)\n        return content\n    }\n    console.log(\"ghReadFile\", file, resp)\n    return resp\n}\n\nexport const ghWriteFile = (opts) => async (...args) => {\n   \n    const file = (opts.prefix || '') + args[0]\n    const content = args[1].toString()\n    console.log(\"ghWriteFile\", file)\n    const endpoint = getEndpoint(opts, file)\n    const resp1 = await fetch(endpoint)\n    const json1 = await resp1.json()\n    console.log(endpoint, json1.sha ? \"Exists, updating...\":\"Dosn't exist, creating...\")\n    const params = {\n        method: \"PUT\",\n        headers: {\n            \"Authorization\": `token ${opts.token}`,\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            sha: json1.sha,\n            message: opts.commitMessage || `Updated ${file}`,\n            content: b64EncodeUnicode(content)\n        })\n    }\n    console.log(\"ghWriteFile params\", params)\n    let resp2;\n    try {\n      resp2 = await fetch(endpoint, params)\n    } catch(err) {\n      console.log(\"ghWriteFile PUT failed\", err)\n    }\n    return resp2 && resp2.status\n}\n\nexport const ghDeleteFile = opts => async (...args) => {\n    const file = (opts.prefix || '') + args[0]\n    console.log(\"ghDeleteFile\", file)\n    const endpoint = getEndpoint(opts, file)\n    const resp1 = await fetch(endpoint)\n    const json1 = await resp1.json()\n    console.log(endpoint, json1.sha ? \"Exists, deleting...\":\"Dosn't exist\")\n    const params = {\n        method: \"DELETE\",\n        headers: {\n            \"Authorization\": `token ${opts.token}`,\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            sha: json1.sha,\n            message: opts.commitMessage || `Deleted ${file}`,\n        })\n    }\n    console.log(\"ghDeleteFile params\", params)\n    let resp2;\n    try {\n      resp2 = await fetch(endpoint, params)\n      const json = await resp2.json()\n      console.log(\"ghDeleteFile DELETE response\", resp2, json)\n    } catch(err) {\n      console.log(\"ghDeleteFile DELETE failed\", err.message, err)\n    }\n    return resp2 && resp2.status\n}\n",
                            "position": {
                                "start": {
                                    "line": 13,
                                    "column": 1,
                                    "offset": 233
                                },
                                "end": {
                                    "line": 15,
                                    "column": 4,
                                    "offset": 301
                                }
                            },
                            "data": {
                                "meta": {
                                    "attrs": {},
                                    "lang": "js",
                                    "tags": [
                                        "implementation"
                                    ],
                                    "directives": [
                                        "collapse"
                                    ],
                                    "isOutput": false,
                                    "hasOutput": false,
                                    "hasSource": true,
                                    "source": {
                                        "attrs": {},
                                        "lang": "txt",
                                        "filename": "utils/fs-promises-gh-utils.js",
                                        "isOutput": false,
                                        "hasOutput": false,
                                        "hasSource": false,
                                        "raw": "txt utils/fs-promises-gh-utils.js"
                                    },
                                    "raw": "js #implementation !collapse < utils/fs-promises-gh-utils.js",
                                    "fromSource": "utils/fs-promises-gh-utils.js"
                                },
                                "hProperties": {
                                    "className": "tag-implementation",
                                    "meta": {
                                        "attrs": {},
                                        "lang": "js",
                                        "tags": [
                                            "implementation"
                                        ],
                                        "directives": [
                                            "collapse"
                                        ],
                                        "isOutput": false,
                                        "hasOutput": false,
                                        "hasSource": true,
                                        "source": {
                                            "attrs": {},
                                            "lang": "txt",
                                            "filename": "utils/fs-promises-gh-utils.js",
                                            "isOutput": false,
                                            "hasOutput": false,
                                            "hasSource": false,
                                            "raw": "txt utils/fs-promises-gh-utils.js"
                                        },
                                        "raw": "js #implementation !collapse < utils/fs-promises-gh-utils.js",
                                        "fromSource": "utils/fs-promises-gh-utils.js"
                                    },
                                    "data": {
                                        "originalSource": ""
                                    }
                                },
                                "originalSource": ""
                            }
                        }
                    ]
                },
                {
                    "type": "cell",
                    "position": {
                        "start": {
                            "line": 16,
                            "column": 1,
                            "offset": 302
                        },
                        "end": {
                            "line": 18,
                            "column": 4,
                            "offset": 357
                        }
                    },
                    "data": {
                        "hName": "cell",
                        "hProperties": {
                            "class": "cell"
                        }
                    },
                    "children": [
                        {
                            "type": "code",
                            "lang": "js",
                            "meta": null,
                            "value": "localStorage.setItem('ghToken', 'YOUR_TOKEN')",
                            "position": {
                                "start": {
                                    "line": 16,
                                    "column": 1,
                                    "offset": 302
                                },
                                "end": {
                                    "line": 18,
                                    "column": 4,
                                    "offset": 357
                                }
                            },
                            "data": {
                                "meta": {
                                    "attrs": {},
                                    "lang": "js",
                                    "isOutput": false,
                                    "hasOutput": false,
                                    "hasSource": false,
                                    "raw": "js"
                                },
                                "hProperties": {
                                    "className": "",
                                    "meta": {
                                        "attrs": {},
                                        "lang": "js",
                                        "isOutput": false,
                                        "hasOutput": false,
                                        "hasSource": false,
                                        "raw": "js"
                                    }
                                }
                            }
                        }
                    ]
                }
            ],
            "position": {
                "start": {
                    "line": 1,
                    "column": 1,
                    "offset": 0
                },
                "end": {
                    "line": 18,
                    "column": 4,
                    "offset": 357
                }
            }
        }
    ],
    "position": {
        "start": {
            "line": 1,
            "column": 1,
            "offset": 0
        },
        "end": {
            "line": 18,
            "column": 4,
            "offset": 357
        }
    }
}