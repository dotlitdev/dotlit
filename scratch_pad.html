<html data-reactroot=""><head><title>Statch Pad</title><meta name="litsrc" value="scratch_pad.lit"/><meta name="litroot" value="/"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/><link rel="stylesheet" href="https://highlightjs.org/static/demo/styles/railscasts.css"/><link rel="stylesheet" href="/style.css"/></head><body><div id="lit-app"><div id="header"><menu class="horizontal open has-children"><li class="MenuTitle"><a href="/">Home</a></li><li class="MenuItems"><menu class="has-children"><li class="MenuTitle">File</li></menu><menu class="has-children" disabled=""><li class="MenuTitle">Cell</li></menu><menu class="has-children" disabled=""><li class="MenuTitle">Section</li></menu><menu class="has-children"><li class="MenuTitle">Help</li></menu><menu class="has-children right"><li class="MenuTitle"><span class="led led-grey"></span></li></menu></li></menu></div><div id="content"><section depth="1" class="" startpos="1:1-0" endpos="9:41-168"><cell startpos="1:1-0" endpos="7:4-126"><h1 id="-scratch-️-pad-">🔥 Scratch ⚠️ Pad 🔬</h1><blockquote>
<p>Scratch pad to view <strong>Markdown</strong> output and <em>emergent</em> behaviour...</p>
</blockquote></cell><section depth="2" class="" startpos="9:1-128" endpos="9:41-168"><cell startpos="9:1-128" endpos="9:41-168"><h2 id="table-of-contents"><a href="#tableofcontents">Table of Contents<span class="linkIcon">§</span></a></h2><ul>
<li>
<p><a href="#%EF%B8%8F-inline-markdown">✍️ Inline Markdown<span class="linkIcon">§</span></a></p>
<ul>
<li>
<p><a href="#basics">Basics<span class="linkIcon">§</span></a></p>
</li>
<li>
<p><a href="#-links">🔗 Links<span class="linkIcon">§</span></a></p>
<ul>
<li><a href="#wikilinks">WikiLinks<span class="linkIcon">§</span></a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="#%F0%9F%A7%AD-headings-h2">🧭 Headings (h2)<span class="linkIcon">§</span></a></p>
<ul>
<li>
<p><a href="#sub-headings-h3">Sub headings (h3)<span class="linkIcon">§</span></a></p>
<ul>
<li>
<p><a href="#little-h4-custom-id">little (h4) {#custom-id}<span class="linkIcon">§</span></a></p>
<ul>
<li>
<p><a href="#tiny-h5">tiny (h5)<span class="linkIcon">§</span></a></p>
<ul>
<li><a href="#smallest-h6">smallest (h6)<span class="linkIcon">§</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="#%EF%B8%8F-lists">☑️ Lists<span class="linkIcon">§</span></a></p>
<ul>
<li><a href="#basics-1">Basics<span class="linkIcon">§</span></a></li>
<li><a href="#lists-with-nested-blocks">Lists with nested blocks<span class="linkIcon">§</span></a></li>
</ul>
</li>
<li>
<p><a href="#%EF%B8%8F-code">✳️ Code<span class="linkIcon">§</span></a></p>
<ul>
<li>
<p><a href="#basic-code-blocks">Basic code blocks<span class="linkIcon">§</span></a></p>
</li>
<li>
<p><a href="#fenced-code-blocks">Fenced code blocks<span class="linkIcon">§</span></a></p>
<ul>
<li>
<p><a href="#tags-and-directives">Tags and directives<span class="linkIcon">§</span></a></p>
</li>
<li>
<p><a href="#attributes">Attributes<span class="linkIcon">§</span></a></p>
</li>
<li>
<p><a href="#outputs-and-transcludes">Outputs and Transcludes<span class="linkIcon">§</span></a></p>
</li>
<li>
<p><a href="#viewers">Viewers<span class="linkIcon">§</span></a></p>
<ul>
<li><a href="#custom-viewers">Custom Viewers<span class="linkIcon">§</span></a></li>
</ul>
</li>
<li>
<p><a href="#transformers">Transformers<span class="linkIcon">§</span></a></p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="#misc">Misc<span class="linkIcon">§</span></a></p>
</li>
</ul></cell></section></section>
<section depth="2" class="" startpos="11:1-170" endpos="15:177-381"><cell startpos="11:1-170" endpos="11:22-191"><h2 id="️-inline-markdown">✍️ Inline Markdown</h2></cell><section depth="3" class="" startpos="13:1-193" endpos="15:177-381"><cell startpos="13:1-193" endpos="15:177-381"><h3 id="basics">Basics</h3><p><code>.lit</code> is a plain text document format. Really it&#x27;s just <strong>Markdown</strong>. But with <em>Sections</em>, <em>Cells</em>, <!-- -->interactive<!-- --> <code>code</code> blocks and <em>meta</em> programming over its own <code>AST</code>.</p></cell></section></section>
<section depth="3" class="" startpos="17:1-383" endpos="31:30-817"><cell startpos="17:1-383" endpos="19:165-561"><h3 id="-links">🔗 Links</h3><p><a href="index">Standard</a> and <a href="#basics">Anchored/Section<span class="linkIcon">§</span></a>, <a href="wiki-links.html?file=wiki-links.lit" title="wiki-links" wikilink="true">wiki-links</a>, inline <a href="https://example.com" title="Example">references</a> and [undefined refs], footnotes<sup id="fnref-1"><a class="footnote-ref" href="#fn-1">1</a></sup> and <a href="https://exqmple.com">external<span class="linkIcon">↗</span></a> links</p></cell><section depth="4" class="" startpos="22:1-564" endpos="31:30-817"><cell startpos="22:1-564" endpos="31:30-817"><h4 id="wikilinks">WikiLinks</h4><ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->with slashes: <a href="utils/fs.html?file=utils/fs.lit" title="utils/fs" wikilink="true">utils/fs</a></li>
<li class="task-list-item"><input type="checkbox" disabled=""/> <!-- -->with fragments: <a href="utils/urifragments.html?file=utils/urifragments.lit" title="utils/uri#fragments" wikilink="true">utils/uri#fragments</a>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled=""/> <!-- -->only fragments like <a href="wikilinks.html?file=wikilinks.lit" title="#Wikilinks" wikilink="true">#Wikilinks</a></li>
<li class="task-list-item"><input type="checkbox" disabled=""/> <!-- -->Hoist fragment</li>
</ul>
</li>
</ul></cell></section></section>
<section depth="2" class="" startpos="33:1-819" endpos="38:27-954"><cell startpos="33:1-819" endpos="33:20-838"><h2 id="🧭-headings-h2">🧭 Headings (h2)</h2></cell><section depth="3" class="" startpos="34:1-839" endpos="38:27-954"><cell startpos="34:1-839" endpos="34:22-860"><h3 id="sub-headings-h3">Sub headings (h3)</h3></cell><section depth="4" class="" startpos="35:1-861" endpos="38:27-954"><cell startpos="35:1-861" endpos="35:30-890"><h4 id="custom-id">little (h4)</h4></cell><section depth="5" class="" startpos="36:1-891" endpos="38:27-954"><cell startpos="36:1-891" endpos="36:16-906"><h5 id="tiny-h5">tiny (h5)</h5></cell><section depth="6" class="" startpos="37:1-907" endpos="38:27-954"><cell startpos="37:1-907" endpos="38:27-954"><h6 id="smallest-h6">smallest (h6)</h6><p>####### tooooo small (h6+)</p></cell></section></section></section></section></section>
<section depth="2" class="" startpos="40:1-956" endpos="50:12-1063"><cell startpos="40:1-956" endpos="40:12-967"><h2 id="️-lists">☑️ Lists</h2></cell><section depth="3" class="" startpos="42:1-969" endpos="50:12-1063"><cell startpos="42:1-969" endpos="50:12-1063"><h3 id="basics-1">Basics</h3><ul>
<li>List<!-- -->
<ul class="contains-task-list">
<li>styles</li>
<li class="task-list-item"><input type="checkbox" disabled=""/> <!-- -->not done<!-- -->
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->done</li>
</ul>
</li>
</ul>
<ol>
<li>Foo<!-- -->
<ol>
<li>Bar</li>
<li>Qux</li>
</ol>
</li>
</ol>
</li>
</ul></cell></section></section>
<section depth="3" class="" startpos="52:1-1065" endpos="60:17-1176"><cell startpos="52:1-1065" endpos="60:17-1176"><h3 id="lists-with-nested-blocks">Lists with nested blocks</h3><ul>
<li>
<h1 id="list-item-heading">List Item heading</h1>
<p>With additional</p>
<blockquote>
<p>block elements</p>
</blockquote>
<codecell class="lang- local"><span class="meta"><span class="lang"></span><ul class="attributes"></ul></span><pre><code class="">Content...
</code></pre></codecell>
</li>
</ul></cell></section>
<section depth="2" class="" startpos="63:1-1179" endpos="69:23-1348"><cell startpos="63:1-1179" endpos="63:11-1189"><h2 id="️-code">✳️ Code</h2></cell><section depth="3" class="" startpos="65:1-1191" endpos="69:23-1348"><cell startpos="65:1-1191" endpos="67:111-1324"><h3 id="basic-code-blocks">Basic code blocks</h3><p>Lines indented with 4 spaces, are plain code blocks without <del>any syntax highlighting</del> or additional behaviour.</p></cell><cell startpos="69:1-1326" endpos="69:23-1348" class="code"><codecell class="lang- local"><span class="meta"><span class="lang"></span><ul class="attributes"></ul></span><pre><code class="">A plain code block
</code></pre></codecell></cell></section></section>
<section depth="3" class="" startpos="71:1-1350" endpos="119:4-2360"><cell startpos="71:1-1350" endpos="73:134-1507"><h3 id="fenced-code-blocks">Fenced code blocks</h3><p>Blocks preceded and suffixed with 3 backticks ie &quot;```&quot; with additional metadata being placed after the backticks on the opening line.</p></cell><cell startpos="75:1-1509" endpos="79:8-1573" class="code"><codecell class="lang- local"><span class="meta"><span class="lang"></span><ul class="attributes"></ul></span><pre><code class="">```lang filename.ext #tag !directive attr=val



```
</code></pre></codecell></cell><cell startpos="81:1-1575" endpos="81:136-1710"><p>Perhaps we need indentation inside fenced blocks to allow nesting fenced blocks (for the reader) without excessive escaping, see below:</p></cell><cell startpos="83:1-1712" endpos="87:4-1759" class="code"><codecell class="lang-md local"><span class="meta"><span class="lang">md</span><ul class="attributes"></ul></span><pre><code class="md">    ```js
    Does this work?
    ```
</code></pre></codecell></cell><cell startpos="91:1-1763" endpos="96:4-2023" class="code"><codecell class="dir-exec dir-above tag-example tag-test lang-js local"><span class="meta"><span class="lang">js</span><span class="repl">node</span><span class="filename">dummy/example.js</span><ul class="tags"><li style="color:white;background-color:#b12511"><span class="tag">example</span></li><li style="color:white;background-color:#036449"><span class="tag">test</span></li></ul><ul class="directives"><li style="color:black;background-color:#02fb89"><span class="directive dir-exec">exec</span></li><li style="color:white;background-color:#585239"><span class="directive dir-above">above</span></li></ul><ul class="attributes"></ul></span><pre><code class="js">// A named and configured fenced code block which is to be executed in a yet to be implemented nodejs repl.
</code></pre></codecell><codecell class="lang-text local output"><span class="meta"><span class="lang">text</span><ul class="attributes"></ul></span><output><pre><code class="text"># has an attached output which will be replaced on execution
</code></pre></output></codecell></cell><cell startpos="98:1-2025" endpos="100:4-2063" class="code"><codecell class="dir-inline lang-uri local"><span class="meta"><span class="lang">uri</span><ul class="directives"><li style="color:black;background-color:#b96da2"><span class="directive dir-inline">inline</span></li></ul><ul class="attributes"></ul></span><iframe src="https://example.com
"></iframe></codecell></cell><section depth="4" class="" startpos="102:1-2065" endpos="119:4-2360"><cell startpos="102:1-2065" endpos="110:13-2233"><h4 id="tags-and-directives">Tags and directives</h4><p>Reserved directives include: <code>!inline</code> <code>!above</code> or for example <code>!onload</code> ...</p><ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->inline</li>
<li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->above</li>
<li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->below</li>
<li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->collapse</li>
<li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->viewer</li>
</ul></cell><cell startpos="112:1-2235" endpos="119:4-2360" class="code"><codecell class="dir-below lang-html local"><span class="meta"><span class="lang">html</span><ul class="directives"><li style="color:white;background-color:#5948c3"><span class="directive dir-below">below</span></li></ul><ul class="attributes"></ul></span><pre><code class="html">&lt;details&gt;
&lt;summary&gt;
  inline &lt;em&gt;HTML&lt;/em&gt;
&lt;/summary&gt;
&lt;p&gt;An example details and summary tag&lt;/p&gt;
&lt;/details&gt;
</code></pre><div><details>
<summary>
  inline <em>HTML</em>
</summary>
<p>An example details and summary tag</p>
</details>
</div></codecell></cell></section></section>
<section depth="4" class="" startpos="121:1-2362" endpos="131:70-2787"><cell startpos="121:1-2362" endpos="123:142-2520"><h4 id="attributes">Attributes</h4><p>For now the only reserved attributes are <code>viewer</code> see <a href="#viewers">Viewers<span class="linkIcon">§</span></a> and <code>repl</code> used to define what remote REPL to execute code against.</p></cell><cell startpos="125:1-2522" endpos="127:4-2562" class="code"><codecell class="lang-txt local"><span class="meta"><span class="lang">txt</span><span class="repl">echo</span><ul class="attributes"></ul></span><pre><code class="txt">pipe to echo binary
</code></pre></codecell></cell><cell startpos="129:1-2564" endpos="131:70-2787"><p><del>Potentially to include <code>updatedAt</code> and or a reference to source cell for outputs in order to maintain a connection with code that produced the output.</del></p><p>Currently implemented as <code>attached=true</code> and <code>updated=unixtimestamp</code>.</p></cell></section>
<section depth="4" class="" startpos="133:1-2789" endpos="188:4-4542"><cell startpos="133:1-2789" endpos="135:90-2908"><h4 id="outputs-and-transcludes">Outputs and Transcludes</h4><p>Metadata which references a source <code>lang &lt; ./file.ext</code> will be transcluded into the view.</p></cell><cell startpos="137:1-2910" endpos="139:4-2968" class="code"><codecell class="lang-lit local"><span class="meta"><span class="lang">lit</span><span class="source">&lt; dummy/🔥.lit</span><ul class="attributes"></ul></span><pre><code class="lit">will be replaced by above source
</code></pre></codecell></cell><cell startpos="141:1-2970" endpos="141:86-3055"><p>Metadata which defines a filename <code>lang file.ext</code> will be mirrored to the filesystem.</p></cell><cell startpos="143:1-3057" endpos="166:4-3976" class="code"><codecell class="dir-inline lang-svg local"><span class="meta"><span class="lang">svg</span><span class="filename">dummy/example.svg</span><ul class="directives"><li style="color:black;background-color:#b96da2"><span class="directive dir-inline">inline</span></li></ul><ul class="attributes"></ul></span><div><?xml version="1.0" standalone="no"?>

<svg width="120" height="120" version="1.1"
  xmlns="http://www.w3.org/2000/svg">
  <defs>
      <radialGradient id="Gradient"
            cx="0.5" cy="0.5" r="0.5" fx="0.25" fy="0.25">
        <stop offset="0%" stop-color="red"/>
        <stop offset="100%" stop-color="blue"/>
      </radialGradient>
  </defs>

  <rect x="10" y="10" rx="15" ry="15" width="100" height="100"
        fill="url(#Gradient)" stroke="black" stroke-width="2"/>

  <circle cx="60" cy="60" r="50" fill="transparent" stroke="white" stroke-width="2"/>
  <circle cx="35" cy="35" r="2" fill="white" stroke="white"/>
  <circle cx="60" cy="60" r="2" fill="white" stroke="white"/>
  <text x="38" y="40" fill="white" font-family="sans-serif" font-size="10pt">(fx,fy)</text>
  <text x="63" y="63" fill="white" font-family="sans-serif" font-size="10pt">(cx,cy)</text>

</svg>
</div></codecell></cell><cell startpos="168:1-3978" endpos="168:191-4168"><p>Using filename and transclude presents problems as to which one you&#x27;re viewing and which one you edit, see also caching (both at the remote and local fs) See <a href="testing/local_remote_files.html?file=testing/local_remote_files.lit" title="testing/Local &amp; Remote files" wikilink="true">testing/Local &amp; Remote files</a></p></cell><cell startpos="170:1-4170" endpos="173:4-4218" class="code"><codecell class="lang-txt local"><span class="meta"><span class="lang">txt</span><span class="filename">dummy/plain.txt</span><span class="source">&lt; dummy/plain.txt</span><ul class="attributes"></ul></span><pre><code class="txt">B
C
</code></pre></codecell></cell><cell startpos="175:1-4220" endpos="177:59-4396"><p>Metadata which defines an output <code>lang &gt; file.ext</code> will output to the filesystem and the document when executed<sup id="fnref-2"><a class="footnote-ref" href="#fn-2">2</a></sup>.</p></cell><cell startpos="179:1-4398" endpos="183:4-4470" class="code"><codecell class="lang-csv local"><span class="meta"><span class="lang">csv</span><span class="output">&gt; dummy/data.csv</span><ul class="attributes"></ul></span><pre><code class="csv">id,name,amount
17494,Alice,9001
245,Bob,2000
</code></pre></codecell></cell><cell startpos="184:1-4471" endpos="188:4-4542" class="code output"><codecell class="lang-csv local output"><span class="meta"><span class="lang">csv</span><span class="filename">dummy/data.csv</span><ul class="attributes"></ul></span><table><tr><td>id</td><td>name</td><td>amount</td></tr><tr><td>17494</td><td>Alice</td><td>9001</td></tr><tr><td>245</td><td>Bob</td><td>2000</td></tr><tr><td></td></tr></table></codecell></cell></section>
<section depth="4" class="" startpos="190:1-4544" endpos="263:10-5879"><cell startpos="190:1-4544" endpos="194:50-4851"><h4 id="viewers">Viewers</h4><p>When a cell is an Output or has the directive <code>!inline</code> and a lang, <del>file-extension</del>, or the explicit <code>viewer=xxx</code> attribute, for which a Viewer exists then the source will be shown using the viewer and plain text source only visible on edit.</p><p>See <a href="meta/styling_and_themes.html#viewers">styles</a></p></cell><cell startpos="196:1-4853" endpos="198:4-4888" class="code output"><codecell class="lang-json local output"><span class="meta"><span class="lang">json</span><ul class="attributes"></ul></span><output><pre><code class="json">{&quot;json&quot;: &quot;viewer tbd&quot;}
</code></pre></output></codecell></cell><cell startpos="200:1-4890" endpos="204:4-5021" class="code output"><codecell class="lang-svg local output"><span class="meta"><span class="lang">svg</span><ul class="attributes"></ul></span><div><svg width="100" height="100">
  <circle cx="50" cy="50" r="40" stroke="green" stroke-width="4" fill="yellow" />
</svg>
</div></codecell></cell><cell startpos="206:1-5023" endpos="208:4-5054" class="code output"><codecell class="lang-uri local output"><span class="meta"><span class="lang">uri</span><ul class="attributes"></ul></span><iframe src="https://example.com
"></iframe></codecell></cell><cell startpos="210:1-5056" endpos="212:4-5105" class="code"><codecell class="dir-inline lang-json local"><span class="meta"><span class="lang">json</span><span class="source">&lt; manifest.json</span><ul class="directives"><li style="color:black;background-color:#b96da2"><span class="directive dir-inline">inline</span></li></ul><ul class="attributes"><li style="color:black;background-color:#cf5332"><span class="attribute attr-viewer">viewer=graph</span></li></ul></span><iframe class="inline" srcDoc="&lt;!DOCTYPE html&gt;
&lt;head&gt;
  &lt;!-- false --&gt;
  &lt;style&gt; body { margin: 0; } &lt;/style&gt;
  &lt;script src=&quot;https://unpkg.com/force-graph&quot;&gt;&lt;/script&gt;
  &lt;!-- from: https://github.com/vasturiano/force-graph --&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id=&quot;graph&quot;&gt;&lt;/div&gt;
  &lt;script&gt;
    const data = undefined;
    const thisfile = window.parent.lit.location.src
    const elem = document.getElementById(&#x27;graph&#x27;)
    const Graph = ForceGraph()(elem)
        .graphData(data)
        .nodeId(&#x27;id&#x27;)
        .nodeVal((n) =&gt; n.backlinks ? n.backlinks.length : 1)
        .nodeLabel(&#x27;id&#x27;)
        .nodeAutoColorBy(&#x27;type&#x27;)
        // .linkColor(d =&gt; data.nodes[d.source].exists ? &#x27;red&#x27; : &#x27;lightblue&#x27;)
        .linkDirectionalArrowLength(6)
        .onNodeHover(node =&gt; elem.style.cursor = node ? &#x27;pointer&#x27; : null)
        .onNodeClick(node =&gt; {
          // Center/zoom on node
          Graph.centerAt(node.x, node.y, 1000);
          Graph.zoom(2, 2000);
        });

    setTimeout( () =&gt; {
        const { nodes, links } = Graph.graphData()
        const node = nodes.filter( n =&gt; n.id === thisfile)[0]
        Graph.centerAt(node.x, node.y, 1000);
        Graph.zoom(2, 1000);
    }, 2000)
  &lt;/script&gt;
&lt;/body&gt;"></iframe></codecell></cell><cell startpos="214:1-5107" endpos="216:4-5150" class="code"><codecell class="dir-inline lang-md local"><span class="meta"><span class="lang">md</span><ul class="directives"><li style="color:black;background-color:#b96da2"><span class="directive dir-inline">inline</span></li></ul><ul class="attributes"></ul></span><div class="md-block dir-inline">
<p><em>Markdown</em> Viewer <strong>TBD</strong></p>
</div></codecell></cell><cell startpos="218:1-5152" endpos="220:4-5194" class="code output"><codecell class="dir-info lang-md local output"><span class="meta"><span class="lang">md</span><ul class="directives"><li style="color:white;background-color:#03164a"><span class="directive dir-info">info</span></li></ul><ul class="attributes"></ul></span><div class="md-block dir-info">
<p>👀 <em><strong>Markdown</strong></em> Viewer.</p>
</div></codecell></cell><cell startpos="222:1-5196" endpos="224:4-5256" class="code"><codecell class="dir-inline lang-js local"><span class="meta"><span class="lang">js</span><ul class="directives"><li style="color:black;background-color:#b96da2"><span class="directive dir-inline">inline</span></li></ul><ul class="attributes"><li style="color:black;background-color:#cf5332"><span class="attribute attr-viewer">viewer=script</span></li></ul></span><pre><code class="js">confirm(&quot;It lives 🌱 from &quot;)
</code></pre></codecell></cell><cell startpos="225:1-5257" endpos="227:4-5300" class="code output"><codecell class="lang-txt local output"><span class="meta"><span class="lang">txt</span><ul class="attributes"></ul><span class="updatedAt">Updated <span class="Time relative">6.0 days ago</span></span></span><output><pre><code class="txt">undefined
</code></pre></output></codecell></cell><cell startpos="229:1-5302" endpos="229:137-5438"><p>The above has a strange behaviour, in that it only executes the <code>static</code> value, and hydration with a different (local) value is ignored.</p></cell><cell startpos="231:1-5440" endpos="237:4-5548" class="code"><codecell class="dir-inline lang-css local"><span class="meta"><span class="lang">css</span><ul class="directives"><li style="color:black;background-color:#b96da2"><span class="directive dir-inline">inline</span></li></ul><ul class="attributes"><li style="color:black;background-color:#cf5332"><span class="attribute attr-viewer">viewer=style</span></li></ul></span><pre><code class="css">#header { color: green; }
h1,h2,h3,h4,h5,h6 {
  position: sticky;
  top:0;
}
</code></pre></codecell></cell><section depth="5" class="" startpos="239:1-5550" endpos="263:10-5879"><cell startpos="239:1-5550" endpos="241:25-5596"><h5 id="custom-viewers">Custom Viewers</h5><p>See <a href="renderer/viewers.html?file=renderer/viewers.lit" title="renderer/viewers" wikilink="true">renderer/viewers</a></p></cell><cell startpos="243:1-5598" endpos="247:4-5678" class="code"><codecell class="dir-viewer lang-js local"><span class="meta"><span class="lang">js</span><ul class="directives"><li style="color:black;background-color:#cf5332"><span class="directive dir-viewer">viewer</span></li></ul><ul class="attributes"><li style="color:black;background-color:#00dd70"><span class="attribute attr-of">of=foo</span></li></ul></span><pre><code class="js">export const viewer = () =&gt; {
  return &quot;Foooooooooo!&quot;
}
</code></pre></codecell></cell><cell startpos="249:1-5680" endpos="251:4-5703" class="code"><codecell class="dir-inline lang-foo local"><span class="meta"><span class="lang">foo</span><ul class="directives"><li style="color:black;background-color:#b96da2"><span class="directive dir-inline">inline</span></li></ul><ul class="attributes"></ul></span><pre><code class="foo">Bar 
</code></pre></codecell></cell><cell startpos="254:1-5706" endpos="263:10-5879"><p>Suggested or planned viewers</p><ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled=""/> <!-- -->JSON</li>
<li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->HTML (inclined)</li>
<li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->SVG (basically the above)</li>
<li class="task-list-item"><input type="checkbox" disabled=""/> <!-- -->CSV: Table</li>
<li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->URI: Iframe</li>
<li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->CSS: Style</li>
<li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->JS: Script</li>
<li class="task-list-item"><input type="checkbox" disabled=""/> <!-- -->UML</li>
</ul></cell></section></section>
<section depth="4" class="" startpos="265:1-5881" endpos="340:4-14656"><cell startpos="265:1-5881" endpos="271:6-6203"><h4 id="transformers">Transformers</h4><p>As opposed to viewers which change how a source file is viewed, a <code>transformer</code> looks at an input and output pair and sees if it knows how to convert between the two <code>lang</code> ie <code>styl &gt; css</code> or <code>ts &gt; js</code> etc</p><p>See <a href="execute_code_cells.html?file=execute_code_cells.lit" title="execute `code` cells" wikilink="true">execute `code` cells</a> for existing <code>ts</code> and <code>jsx</code> transpilation to <code>js</code> via Babel.</p><p>Mock:</p></cell><cell startpos="273:1-6205" endpos="278:4-6367" class="code"><codecell class="dir-transformer lang-js local"><span class="meta"><span class="lang">js</span><ul class="directives"><li style="color:black;background-color:#88d14d"><span class="directive dir-transformer">transformer</span></li></ul><ul class="attributes"><li style="color:black;background-color:#00dd70"><span class="attribute attr-of">of=jsx</span></li></ul></span><pre><code class="js">export const transformer = (node) =&gt; {
  const src = node &amp;&amp; node.data &amp;&amp; node.data.value  
  return `// TODO: babelify. \n${src}`
}
</code></pre></codecell></cell><cell startpos="280:1-6369" endpos="340:4-14656" class="code"><codecell class="lang-js local"><span class="meta"><span class="lang">js</span><ul class="attributes"></ul></span><pre><code class="js">return lit.file.data.transformers.jsx
</code></pre></codecell><codecell class="lang-txt local output"><span class="meta"><span class="lang">txt</span><ul class="attributes"></ul><span class="updatedAt">Updated <span class="Time relative">1 minute ago</span></span></span><output><pre><code class="txt">{ data: 
   { times: 
      { local: &#x27;7 seconds ago&#x27;,
        remote: &#x27;7 seconds ago&#x27;,
        ageMessage: &#x27;now&#x27; },
     frontmatter: { title: &#x27;Statch Pad&#x27; },
     __mdcodeblocks: 3,
     ast: { type: &#x27;root&#x27;, children: [Object], position: [Object] },
     viewers: { foo: [Object] },
     transformers: { jsx: [Object] },
     files: 
      [ [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object],
        [Object] ] },
  messages: 
   [ [/scratch_pad.lit:1:1: [Transclude] Failed to load manifest.json as /manifest.json],
     [/scratch_pad.lit:1:1: Transformer Error: Can&#x27;t find variable: module],
     [/scratch_pad.lit:1:1: Transformer Error: Can&#x27;t find variable: module],
     [/scratch_pad.lit:1:1: Transformer Error: Can&#x27;t find variable: module],
     [/scratch_pad.lit:1:1: Transformer Error: Can&#x27;t find variable: module] ],
  history: [ &#x27;/scratch_pad.lit&#x27; ],
  cwd: &#x27;/&#x27;,
  contents: &#x27;# 🔥 Scratch ⚠️ Pad 🔬\n\n&gt; Scratch pad to view **Markdown** output and *emergent* behaviour...\n\n&lt;!-- data\ntitle: Statch Pad\n--&gt;\n\n## [Table of Contents](#tableofcontents)\n\n## ✍️ Inline Markdown\n\n### Basics\n\n`.lit` is a plain text document format. Really it\&#x27;s just **Markdown**. But with *Sections*, *Cells*, &lt;p&gt;interactive&lt;/p&gt; `code` blocks and _meta_ programming over its own `AST`.\n\n### 🔗 Links\n\n[Standard](index) and [Anchored/Section](#basics), [[wiki-links]], inline [references] and [undefined refs], footnotes[^1] and [external](https://exqmple.com) links\n\n\n#### WikiLinks\n\n- [x] with slashes: [[utils/fs]] \n- [ ] with fragments: [[utils/uri#fragments]]\n  - [ ] only fragments like [[#Wikilinks]]\n  - [ ] Hoist fragment \n\n[references]: https://example.com &quot;Example&quot;\n[^1]: footnote \n    With multi line `content`\n\n## 🧭 Headings (h2)\n### Sub headings (h3)\n#### little (h4) {#custom-id}\n##### tiny (h5)\n###### smallest (h6)\n####### tooooo small (h6+)\n\n## ☑️ Lists\n\n### Basics\n\n* List\n  - styles\n  - [ ] not done\n    - [x] done\n  1. Foo\n     1. Bar\n     1. Qux\n\n### Lists with nested blocks\n\n- # List Item heading\n  \n  With additional \n\n  &gt; block elements\n\n      Content...\n\n\n## ✳️ Code\n\n### Basic code blocks\n\nLines indented with 4 spaces, are plain code blocks without ~any syntax highlighting~ or additional behaviour.\n\n    A plain code block\n\n### Fenced code blocks\n\nBlocks preceded and suffixed with 3 backticks ie &quot;```&quot; with additional metadata being placed after the backticks on the opening line.\n\n    ```lang filename.ext #tag !directive attr=val\n\n\n    \n    ```\n\nPerhaps we need indentation inside fenced blocks to allow nesting fenced blocks (for the reader) without excessive escaping, see below:\n\n```md\n    ```js\n    Does this work?\n    ```\n```\n\n\n\n```js dummy/example.js #example #test !exec !above repl=node\n// A named and configured fenced code block which is to be executed in a yet to be implemented nodejs repl.\n```\n```&gt;text attached=true\n# has an attached output which will be replaced on execution\n```\n\n```uri !inline\nhttps://example.com\n```\n\n#### Tags and directives\n\nReserved directives include: `!inline` `!above` or for example `!onload` ...\n\n- [x] inline\n- [x] above\n- [x] below\n- [x] collapse\n- [x] viewer\n\n```html !below\n&lt;details&gt;\n&lt;summary&gt;\n  inline &lt;em&gt;HTML&lt;/em&gt;\n&lt;/summary&gt;\n&lt;p&gt;An example details and summary tag&lt;/p&gt;\n&lt;/details&gt;\n```\n\n#### Attributes\n\nFor now the only reserved attributes are `viewer` see [Viewers](#viewers) and `repl` used to define what remote REPL to execute code against.\n\n```txt repl=echo\npipe to echo binary\n```\n\n~Potentially to include `updatedAt` and or a reference to source cell for outputs in order to maintain a connection with code that produced the output.~\n\nCurrently implemented as `attached=true` and `updated=unixtimestamp`.\n\n#### Outputs and Transcludes\n\nMetadata which references a source `lang &lt; ./file.ext` will be transcluded into the view.\n\n```lit &lt; dummy/🔥.lit\nwill be replaced by above source\n```\n\nMetadata which defines a filename `lang file.ext` will be mirrored to the filesystem.\n\n```svg dummy/example.svg !inline\n&lt;?xml version=&quot;1.0&quot; standalone=&quot;no&quot;?&gt;\n\n&lt;svg width=&quot;120&quot; height=&quot;120&quot; version=&quot;1.1&quot;\n  xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;\n  &lt;defs&gt;\n      &lt;radialGradient id=&quot;Gradient&quot;\n            cx=&quot;0.5&quot; cy=&quot;0.5&quot; r=&quot;0.5&quot; fx=&quot;0.25&quot; fy=&quot;0.25&quot;&gt;\n        &lt;stop offset=&quot;0%&quot; stop-color=&quot;red&quot;/&gt;\n        &lt;stop offset=&quot;100%&quot; stop-color=&quot;blue&quot;/&gt;\n      &lt;/radialGradient&gt;\n  &lt;/defs&gt;\n\n  &lt;rect x=&quot;10&quot; y=&quot;10&quot; rx=&quot;15&quot; ry=&quot;15&quot; width=&quot;100&quot; height=&quot;100&quot;\n        fill=&quot;url(#Gradient)&quot; stroke=&quot;black&quot; stroke-width=&quot;2&quot;/&gt;\n\n  &lt;circle cx=&quot;60&quot; cy=&quot;60&quot; r=&quot;50&quot; fill=&quot;transparent&quot; stroke=&quot;white&quot; stroke-width=&quot;2&quot;/&gt;\n  &lt;circle cx=&quot;35&quot; cy=&quot;35&quot; r=&quot;2&quot; fill=&quot;white&quot; stroke=&quot;white&quot;/&gt;\n  &lt;circle cx=&quot;60&quot; cy=&quot;60&quot; r=&quot;2&quot; fill=&quot;white&quot; stroke=&quot;white&quot;/&gt;\n  &lt;text x=&quot;38&quot; y=&quot;40&quot; fill=&quot;white&quot; font-family=&quot;sans-serif&quot; font-size=&quot;10pt&quot;&gt;(fx,fy)&lt;/text&gt;\n  &lt;text x=&quot;63&quot; y=&quot;63&quot; fill=&quot;white&quot; font-family=&quot;sans-serif&quot; font-size=&quot;10pt&quot;&gt;(cx,cy)&lt;/text&gt;\n\n&lt;/svg&gt;\n```\n\nUsing filename and transclude presents problems as to which one you\&#x27;re viewing and which one you edit, see also caching (both at the remote and local fs) See [[testing/Local &amp; Remote files]]\n\n```txt dummy/plain.txt &lt; dummy/plain.txt\nB\nC\n```\n\nMetadata which defines an output `lang &gt; file.ext` will output to the filesystem and the document when executed[^2].\n\n[^2]: `REPL` still to be reimplemented. See [[REPL/index]]\n\n```csv &gt; dummy/data.csv\nid,name,amount\n17494,Alice,9001\n245,Bob,2000\n```\n```&gt;csv dummy/data.csv\nid,name,amount\n17494,Alice,9001\n245,Bob,2000\n```\n\n#### Viewers\n\nWhen a cell is an Output or has the directive `!inline` and a lang, ~file-extension~, or the explicit `viewer=xxx` attribute, for which a Viewer exists then the source will be shown using the viewer and plain text source only visible on edit.\n\nSee [styles](meta/styling_and_themes.lit#viewers)\n\n```&gt;json\n{&quot;json&quot;: &quot;viewer tbd&quot;}\n```\n\n```&gt;svg\n&lt;svg width=&quot;100&quot; height=&quot;100&quot;&gt;\n  &lt;circle cx=&quot;50&quot; cy=&quot;50&quot; r=&quot;40&quot; stroke=&quot;green&quot; stroke-width=&quot;4&quot; fill=&quot;yellow&quot; /&gt;\n&lt;/svg&gt;\n```\n\n```&gt;uri\nhttps://example.com\n```\n\n```json !inline viewer=graph &lt; manifest.json\n\n```\n\n```md !inline\n*Markdown* Viewer **TBD**\n```\n\n```&gt;md !info\n👀 ***Markdown*** Viewer.\n```\n\n```js viewer=script !inline\nconfirm(&quot;It lives 🌱 from &quot;)\n```\n```&gt;txt updated=1618957537075\nundefined\n```\n\nThe above has a strange behaviour, in that it only executes the `static` value, and hydration with a different (local) value is ignored.\n\n```css !inline viewer=style\n#header { color: green; }\nh1,h2,h3,h4,h5,h6 {\n  position: sticky;\n  top:0;\n}\n```\n\n##### Custom Viewers\n\nSee [[renderer/viewers]]\n\n```js !viewer of=foo\nexport const viewer = () =&gt; {\n  return &quot;Foooooooooo!&quot;\n}\n```\n\n```foo !inline\nBar \n```\n\n\nSuggested or planned viewers\n\n- [ ] JSON\n- [x] HTML (inclined)\n- [x] SVG (basically the above)\n- [ ] CSV: Table\n- [x] URI: Iframe\n- [x] CSS: Style\n- [x] JS: Script\n- [ ] UML\n\n#### Transformers\n\nAs opposed to viewers which change how a source file is viewed, a `transformer` looks at an input and output pair and sees if it knows how to convert between the two `lang` ie `styl &gt; css` or `ts &gt; js` etc\n\nSee [[execute `code` cells]] for existing `ts` and `jsx` transpilation to `js` via Babel.\n\nMock:\n\n```js !transformer of=jsx\nexport const transformer = (node) =&gt; {\n  const src = node &amp;&amp; node.data &amp;&amp; node.data.value  \n  return `// TODO: babelify. \\n${src}`\n}\n```\n\n```js\nreturn lit.file\n```\n\n## Misc\n\n[[throwaway/codevaluebug]]&#x27;,
  result: 
   { &#x27;$$typeof&#x27;: {},
     type: {},
     key: null,
     ref: null,
     props: { children: [Object] },
     _owner: null,
     _store: {} } }
</code></pre></output></codecell></cell></section>
<section depth="2" class="" startpos="342:1-14658" endpos="344:27-14693"><cell startpos="342:1-14658" endpos="344:27-14693"><h2 id="misc">Misc</h2><p><a href="throwaway/codevaluebug.html?file=throwaway/codevaluebug.lit" title="throwaway/codevaluebug" wikilink="true">throwaway/codevaluebug</a></p></cell></section>
<div class="footnotes">
<hr/>
<ol>
<li id="fn-1">footnote
With multi line <code>content</code><a class="footnote-backref" href="#fnref-1">↩</a></li>
<li id="fn-2"><code>REPL</code> still to be reimplemented. See <a href="repl/index.html?file=repl/index.lit" title="REPL/index" wikilink="true">REPL/index</a><a class="footnote-backref" href="#fnref-2">↩</a></li>
</ol>
</div></div></div><div id="backlinks"><h4>Backlinks (2)</h4><ol><li><a title=".lit" href="/index.html">.lit</a></li><li><a title=".lit" href="/index.html">.lit</a></li></ol></div><script src="//cdn.jsdelivr.net/npm/eruda"></script><script>eruda.init();</script><script src="/web.bundle.js"></script></body></html>