<html data-reactroot=""><head><title>execute_code_cells</title><meta name="litsrc" value="execute_code_cells.lit"/><meta name="litroot" value="/"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/><link rel="stylesheet" href="https://highlightjs.org/static/demo/styles/railscasts.css"/><link rel="stylesheet" href="/style.css"/></head><body><div id="lit-app"><div id="header"><menu class="horizontal open has-children"><li class="MenuTitle"><a href="/">Home</a></li><li class="MenuItems"><menu class="has-children"><li class="MenuTitle">File</li></menu><menu class="has-children" disabled=""><li class="MenuTitle">Cell</li></menu><menu class="has-children" disabled=""><li class="MenuTitle">Section</li></menu><menu class="has-children"><li class="MenuTitle">Help</li></menu><menu class="has-children right"><li class="MenuTitle"><span class="led led-grey"></span></li></menu></li></menu></div><div id="content"><section depth="1" class="" startpos="1:1-0" endpos="3:21-46"><cell startpos="1:1-0" endpos="1:25-24"><h1 id="executing-code-cells">Executing <code>code</code> cells</h1></cell><section depth="2" class="" startpos="3:1-26" endpos="3:21-46"><cell startpos="3:1-26" endpos="3:21-46"><h2 id="table-of-contents">Table of Contents</h2><ul>
<li>
<p><a href="#bugs--and-to-do-">Bugs ๐ and To do โ<span class="linkIcon">ยง</span></a></p>
</li>
<li>
<p><a href="#examples">Examples<span class="linkIcon">ยง</span></a></p>
<ul>
<li><a href="#typescript">TypeScript<span class="linkIcon">ยง</span></a></li>
<li><a href="#async-and-promises">Async and Promises<span class="linkIcon">ยง</span></a></li>
<li><a href="#react-jsx">React <code>jsx</code><span class="linkIcon">ยง</span></a></li>
<li><a href="#output-markdown">Output Markdown<span class="linkIcon">ยง</span></a></li>
<li><a href="#meta-lit-global-and-ast">Meta: <code>lit</code> global and AST<span class="linkIcon">ยง</span></a></li>
</ul>
</li>
</ul></cell></section></section>
<section depth="2" class="" startpos="5:2-49" endpos="10:47-238"><cell startpos="5:2-49" endpos="10:47-238"><h2 id="bugs--and-to-do-">Bugs ๐ and To do โ</h2><ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->executed cell gets replaced with its output</li>
<li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->more robust outputs<!-- -->
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->replace &quot;connected&quot; output on exec</li>
</ul>
</li>
<li class="task-list-item"><input type="checkbox" disabled=""/> <!-- -->Extract transpilation as <a href="transfomers.html?file=transfomers.lit" title="Transfomers" wikilink="true">Transfomers</a></li>
</ul></cell></section>
<section depth="2" class="" startpos="12:1-240" endpos="45:4-648"><cell startpos="12:1-240" endpos="12:12-251"><h2 id="examples">Examples</h2></cell><cell startpos="18:1-257" endpos="24:4-375" class="code"><codecell class="lang-js local"><span class="meta"><span class="lang">js</span></span><pre><code class="js">console.log(document.referrer)
</code></pre></codecell><codecell class="lang-txt local output"><span class="meta"><span class="lang">txt</span><span class="updatedAt">Updated <span class="Time relative">1.3 hours ago</span></span></span><output><pre><code class="txt">https://dotlit.org/
undefined
</code></pre></output></codecell></cell><section depth="3" class="" startpos="31:1-382" endpos="45:4-648"><cell startpos="31:1-382" endpos="31:15-396"><h3 id="typescript">TypeScript</h3></cell><cell startpos="33:1-398" endpos="45:4-648" class="code"><codecell class="lang-ts local"><span class="meta"><span class="lang">ts</span><span class="repl">js</span><span class="filename">test.ts</span></span><pre><code class="ts">type Options = {[key: number]: string}
const fn = (opts : Options) =&gt; {
  const str:string = 12 
  // need linting to make this useful
  return str
}

return fn()
</code></pre></codecell><codecell class="lang-txt local output"><span class="meta"><span class="lang">txt</span><span class="updatedAt">Updated <span class="Time relative">10.6 hours ago</span></span></span><output><pre><code class="txt">12
</code></pre></output></codecell></cell></section></section>
<section depth="3" class="" startpos="53:1-656" endpos="68:4-945"><cell startpos="53:1-656" endpos="53:23-678"><h3 id="async-and-promises">Async and Promises</h3></cell><cell startpos="55:1-680" endpos="68:4-945" class="code"><codecell class="lang-js local"><span class="meta"><span class="lang">js</span><span class="filename">test.js</span></span><pre><code class="js">const wait = (ms) =&gt; {
  return new Promise(resolve =&gt; {
    setTimeout( () =&gt; {
      resolve(new Date())
    }, ms)
     
  })
}
return wait(1000)
</code></pre></codecell><codecell class="lang-txt local output"><span class="meta"><span class="lang">txt</span><span class="updatedAt">Updated <span class="Time relative">23 hours ago</span></span></span><output><pre><code class="txt">Thu Apr 22 2021 00:44:01 GMT+0100 (BST)
</code></pre></output></codecell></cell></section>
<section depth="3" class="" startpos="78:1-955" endpos="168:4-2654"><cell startpos="78:1-955" endpos="78:16-970"><h3 id="react-jsx">React <code>jsx</code></h3></cell><cell startpos="80:1-972" endpos="91:4-1199" class="code"><codecell class="lang-jsx local"><span class="meta"><span class="lang">jsx</span><span class="repl">js</span><span class="filename">test.jsx</span></span><pre><code class="jsx">import React from &#x27;https://cdn.skypack.dev/react&#x27;

const Component = props =&gt; {
  return &lt;div&gt;&lt;/div&gt;
}

return &lt;Component/&gt;
</code></pre></codecell><codecell class="dir-error lang-txt local output"><span class="meta"><span class="lang">txt</span><ul class="directives"><li><span class="directive dir-error">error</span></li></ul><span class="updatedAt">Updated <span class="Time relative">10.4 hours ago</span></span></span><output><pre><code class="txt">undefined
</code></pre></output></codecell></cell><cell startpos="93:1-1201" endpos="104:4-1448" class="code"><codecell class="lang-jsx local"><span class="meta"><span class="lang">jsx</span><span class="repl">js</span><span class="filename">test.jsx</span></span><pre><code class="jsx">return (async args =&gt; {

  const React = await import(&#x27;https://cdn.skypack.dev/react&#x27;)

  const Component = props =&gt; {
    return &lt;div {...props}&gt;React component&lt;/div&gt;
  }

  return &lt;Component id=&quot;foo&quot;/&gt;
})()
</code></pre></codecell></cell><cell startpos="106:1-1450" endpos="150:4-2362" class="code"><codecell class="dir-inline lang-jsx local"><span class="meta"><span class="lang">jsx</span><span class="repl">js</span><span class="filename">test.jsx</span><ul class="directives"><li><span class="directive dir-inline">inline</span></li></ul></span><pre><code class="jsx">return (async args =&gt; {

const b = document.body
const ch = b.clientHeight
const sh = b.scrollHeight
const st = b.scrollTop

const c = (ch/2)+st
const cp = c / sh
  const y = cp
  const confetti = (await 
  import(&#x27;https://cdn.skypack.dev/canvas-confetti&#x27;)).default
  // do this for 30 seconds
var duration = 30 * 1000;
var end = Date.now() + duration;

(function frame() {
  // launch a few confetti from the left edge
  confetti({
    particleCount: 7,
    angle: 180,
    spread: 55,
    origin: { y: 0 }
  });
  // and launch a few from the right edge
  confetti({
    particleCount: 7,
    angle: 0,
    spread: 55,
    origin: { y: 1 }
  });

  // keep going until we are out of time
  if (Date.now() &lt; end) {
    console.log(&quot;still going&quot;)
    requestAnimationFrame(frame);
  }
}());
})()
</code></pre></codecell><codecell class="lang-txt local output"><span class="meta"><span class="lang">txt</span><span class="updatedAt">Updated <span class="Time relative">2 minutes ago</span></span></span><output><pre><code class="txt">still going
undefined
</code></pre></output></codecell></cell><cell startpos="152:1-2364" endpos="168:4-2654" class="code"><codecell class="lang-js local"><span class="meta"><span class="lang">js</span></span><pre><code class="js">
const b = document.body
const ch = b.clientHeight
const sh = b.scrollHeight
const st = b.scrollTop

const c = (ch/2)+st
const cp = c / sh

return {
   ch,sh,st,c,cp
}
</code></pre></codecell><codecell class="lang-txt local output"><span class="meta"><span class="lang">txt</span><span class="updatedAt">Updated <span class="Time relative">11 minutes ago</span></span></span><output><pre><code class="txt">{ ch: 664, sh: 3092, st: 1836, c: 2168, cp: 0.7011642949547219 }
</code></pre></output></codecell></cell></section>
<section depth="3" class="" startpos="182:1-2668" endpos="204:4-2964"><cell startpos="182:1-2668" endpos="182:20-2687"><h3 id="output-markdown">Output Markdown</h3></cell><cell startpos="184:1-2689" endpos="191:4-2855" class="code"><codecell class="lang-js local"><span class="meta"><span class="lang">js</span></span><pre><code class="js">console.log(&quot;A __*result*__: **`&quot; +  42/13 + &quot;`**&quot;)
return 42
</code></pre></codecell><codecell class="lang-md local output"><span class="meta"><span class="lang">md</span><span class="updatedAt">Updated <span class="Time relative">22.9 hours ago</span></span></span><div class="md-block">
<p>A <strong><em>result</em></strong>: <strong><code>3.230769230769231</code></strong>
42</p>
</div></codecell></cell><cell startpos="199:1-2863" endpos="204:4-2964" class="code"><codecell class="lang-js local"><span class="meta"><span class="lang">js</span></span><pre><code class="js">return { foo: &#x27;bar&#x27;}
</code></pre></codecell><codecell class="lang-json local output"><span class="meta"><span class="lang">json</span><span class="updatedAt">Updated <span class="Time relative">1.3 days ago</span></span></span><output><pre><code class="json">{ foo: &#x27;bar&#x27; }
</code></pre></output></codecell></cell></section>
<section depth="3" class="" startpos="213:1-2973" endpos="382:4-6134"><cell startpos="213:1-2973" endpos="213:31-3003"><h3 id="meta-lit-global-and-ast">Meta: <code>lit</code> global and AST</h3></cell><cell startpos="239:1-3029" endpos="283:4-4118" class="code"><codecell class="lang-js local"><span class="meta"><span class="lang">js</span></span><pre><code class="js">return this
</code></pre></codecell><codecell class="dir-collapse lang-ast_info local collapsed output"><span class="meta"><span class="lang">ast_info</span><ul class="directives"><li><span class="directive dir-collapse">collapse</span></li></ul><span class="updatedAt">Updated <span class="Time relative">1.7 hours ago</span></span></span><output><pre><code class="ast_info">{ type: &#x27;root&#x27;,
  children: 
   [ { type: &#x27;section&#x27;,
       data: [Object],
       depth: 1,
       children: [Object],
       position: [Object] },
     { type: &#x27;section&#x27;,
       data: [Object],
       depth: 2,
       children: [Object],
       position: [Object] },
     { type: &#x27;section&#x27;,
       data: [Object],
       depth: 2,
       children: [Object],
       position: [Object] },
     { type: &#x27;section&#x27;,
       data: [Object],
       depth: 3,
       children: [Object],
       position: [Object] },
     { type: &#x27;section&#x27;,
       data: [Object],
       depth: 3,
       children: [Object],
       position: [Object] },
     { type: &#x27;section&#x27;,
       data: [Object],
       depth: 3,
       children: [Object],
       position: [Object] },
     { type: &#x27;section&#x27;,
       data: [Object],
       depth: 3,
       children: [Object],
       position: [Object] } ],
  position: 
   { start: { line: 1, column: 1, offset: 0 },
     end: { line: 315, column: 1, offset: 4807 } } }
</code></pre></output></codecell></cell><cell startpos="290:1-4125" endpos="298:4-4367" class="code"><codecell class="lang-js local"><span class="meta"><span class="lang">js</span></span><pre><code class="js">return lit.location
</code></pre></codecell><codecell class="dir-collapse lang-litlocation local collapsed output"><span class="meta"><span class="lang">litlocation</span><ul class="directives"><li><span class="directive dir-collapse">collapse</span></li></ul><span class="updatedAt">Updated <span class="Time relative">22.9 hours ago</span></span></span><output><pre><code class="litlocation">{ src: &#x27;execute_code_cells.lit&#x27;,
  root: &#x27;/&#x27;,
  base: &#x27;https://dotlit.org/&#x27;,
  query: { file: &#x27;execute_code_cells.lit&#x27; } }
</code></pre></output></codecell></cell><cell startpos="301:1-4370" endpos="328:4-5168" class="code"><codecell class="lang-js local"><span class="meta"><span class="lang">js</span></span><pre><code class="js">return lit.utils
</code></pre></codecell><codecell class="dir-collapse lang-lit_utils local collapsed output"><span class="meta"><span class="lang">lit_utils</span><ul class="directives"><li><span class="directive dir-collapse">collapse</span></li></ul><span class="updatedAt">Updated <span class="Time relative">22.9 hours ago</span></span></span><output><pre><code class="lit_utils">{ select: 
   { matches: [Function: matches],
     selectAll: [Function: selectAll],
     select: [Function: select] },
  path: 
   { resolve: [Function: resolve],
     normalize: [Function: normalize],
     isAbsolute: [Function: isAbsolute],
     join: [Function: join],
     relative: [Function: relative],
     _makeLong: [Function: _makeLong],
     dirname: [Function: dirname],
     basename: [Function: basename],
     extname: [Function: extname],
     format: [Function: format],
     parse: [Function: parse],
     sep: &#x27;/&#x27;,
     delimiter: &#x27;:&#x27;,
     win32: null,
     posix: [Circular] },
  vfile: [Function: VFile],
  delete: [Function: _delete],
  read: [Function: read] }
</code></pre></output></codecell></cell><cell startpos="331:1-5171" endpos="347:4-5594" class="code"><codecell class="lang-js local"><span class="meta"><span class="lang">js</span></span><pre><code class="js">return lit.utils
          .select
          .selectAll(&#x27;heading&#x27;, ast)
          .map( h =&gt; `${h.depth} ${h.data.id }`)
</code></pre></codecell><codecell class="dir-collapse lang-headings local collapsed output"><span class="meta"><span class="lang">headings</span><ul class="directives"><li><span class="directive dir-collapse">collapse</span></li></ul><span class="updatedAt">Updated <span class="Time relative">22.8 hours ago</span></span></span><output><pre><code class="headings">[ &#x27;1 executing-code-cells&#x27;,
  &#x27;2 table-of-contents&#x27;,
  &#x27;2 bugs--and-to-do-&#x27;,
  &#x27;2 examples&#x27;,
  &#x27;3 typescript&#x27;,
  &#x27;3 async-and-promises&#x27;,
  &#x27;3 react-jsx&#x27;,
  &#x27;3 output-markdown&#x27;,
  &#x27;3 meta-lit-global-and-ast&#x27; ]
</code></pre></output></codecell></cell><cell startpos="350:1-5597" endpos="364:4-5842" class="code"><codecell class="dir-inline lang-html local"><span class="meta"><span class="lang">html</span><ul class="directives"><li><span class="directive dir-inline">inline</span></li></ul></span><div><style>
codecell.collapsed.dir-collapse li span.dir-collapse {
  display: none;
}
codecell.dir-error pre {
  border: 2px solid red;
}

codecell.dir-error li span.dir-error {
  background-color: red;
  color: white;
}
</style>
</div></codecell></cell><cell startpos="366:1-5844" endpos="382:4-6134" class="code"><codecell class="lang-js local"><span class="meta"><span class="lang">js</span></span><pre><code class="js">
const b = document.body
const ch = b.clientHeight
const sh = b.scrollHeight
const st = b.scrollTop

const c = (ch/2)+st
const cp = c / sh

return {
   ch,sh,st,c,cp
}
</code></pre></codecell><codecell class="lang-txt local output"><span class="meta"><span class="lang">txt</span><span class="updatedAt">Updated <span class="Time relative">9 minutes ago</span></span></span><output><pre><code class="txt">{ ch: 664, sh: 3475, st: 2811, c: 3143, cp: 0.9044604316546763 }
</code></pre></output></codecell></cell></section></div></div><div id="backlinks"><h4>Backlinks (3)</h4><ol><li><a title=".lit" href="/index.html">.lit</a></li><li><a title="Title TBD (repl/index.lit)" href="/repl/index.html">Title TBD (repl/index.lit)</a></li><li><a title="Statch Pad" href="/scratch_pad.html">Statch Pad</a></li></ol></div><script src="//cdn.jsdelivr.net/npm/eruda"></script><script>eruda.init();</script><script src="/web.bundle.js"></script></body></html>