<html data-reactroot=""><head><title>Compact Manifest</title><meta name="litsrc" value="testing/compact_manifest.lit"/><meta name="litroot" value="/"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/><link rel="stylesheet" href="https://highlightjs.org/static/demo/styles/railscasts.css"/><link rel="stylesheet" href="/style.css"/></head><body><div id="lit-app"><div id="lit-header"><menu class="horizontal open has-children"><li class="MenuTitle"><a href="/">Home</a></li><li class="MenuItems"><menu class="has-children"><li class="MenuTitle">File</li></menu><menu class="has-children" disabled=""><li class="MenuTitle">Cell</li></menu><menu class="has-children" disabled=""><li class="MenuTitle">Section</li></menu><menu class="has-children"><li class="MenuTitle">Help</li></menu><menu class="has-children right"><li class="MenuTitle"><span class="led led-grey"></span></li></menu></li></menu><div class="lit-messages"></div></div><div id="content"><section depth="1" class="" startpos="1:1-0" endpos="24:4-3948"><cell startpos="1:1-0" endpos="5:83-181"><div class="cell-content"><h1 id="compact-manifest">Compact Manifest</h1><p>Reducing the serialised size of a manifest of all files in a <code>.lit</code> notebook.</p><p>Trying out <a href="https://github.com/sidvishnoi/compact-prefix-tree">compct-prefix-tree<span class="linkIcon">â†—</span></a></p></div></cell><cell startpos="7:1-183" endpos="24:4-3948" class="code"><div class="cell-content"><codecell class="lang-js local"><span class="meta"><span class="lang">js</span></span><pre><code class="js">return (async fn =&gt; {
  const {CompactPrefixTree} = await import(&#x27;https://cdn.skypack.dev/compact-prefix-tree&#x27;)

  const manifest = await fetch(&#x27;/manifest.json&#x27;).then(res =&gt; res.json())
  const keys = manifest.nodes.map(n=&gt;n.id)
  const trie = new CompactPrefixTree(keys)

  const before = JSON.stringify(keys)
  const after = JSON.stringify(trie.T)
  console.log(after)
  return `A ${after.length/before.length*100}% reduction.`
})()
</code></pre></codecell><codecell class="lang-txt local output"><span class="meta"><span class="lang">txt</span><span class="updatedAt">Updated <span class="Time relative">56s ago</span></span></span><output><pre><code class="txt">{&quot;404.lit&quot;:null,&quot;cli&quot;:{&quot;/cli.lit&quot;:null,&quot;ent/&quot;:{&quot;client.lit&quot;:null,&quot;index.jsx&quot;:null,&quot;style&quot;:{&quot;.styl&quot;:null,&quot;s/&quot;:{&quot;c&quot;:{&quot;odecell.styl&quot;:null,&quot;ell&quot;:{&quot;.styl&quot;:null,&quot;menu.styl&quot;:null}},&quot;viewers.styl&quot;:null}}}},&quot;divergence_from_markdown.lit&quot;:null,&quot;execute_code_cells.lit&quot;:null,&quot;functions.lit&quot;:null,&quot;index.lit&quot;:null,&quot;meta&quot;:{&quot;.lit&quot;:null,&quot;/github_workflows.lit&quot;:null,&quot;/s&quot;:{&quot;ettings.lit&quot;:null,&quot;tyling_and_themes.lit&quot;:{&quot;&quot;:null,&quot;#viewers&quot;:null}},&quot;/files_and_links.lit&quot;:null,&quot;/.github/workflows/npm-publish.yaml&quot;:null},&quot;persist_to_github.lit&quot;:null,&quot;plugin_system.lit&quot;:null,&quot;re&quot;:{&quot;nderer/&quot;:{&quot;renderer.lit&quot;:null,&quot;viewers&quot;:{&quot;.lit&quot;:null,&quot;/plantuml.lit&quot;:null,&quot;/m&quot;:{&quot;eta.js&quot;:null,&quot;d/&quot;:{&quot;admonitions.lit&quot;:null,&quot;index.jsx&quot;:null}}},&quot;index.jsx&quot;:null,&quot;extractPlugins.js&quot;:null,&quot;transcludeCode.js&quot;:null,&quot;file.txt&quot;:null,&quot;difftestA.txt&quot;:null},&quot;pl&quot;:{&quot;s.lit&quot;:null,&quot;/index.&quot;:{&quot;lit&quot;:null,&quot;js&quot;:null}},&quot;mark.lit&quot;:null},&quot;scratch_pad.lit&quot;:null,&quot;throwaway/codevaluebug.lit&quot;:null,&quot;utils/&quot;:{&quot;index.lit&quot;:null,&quot;fs&quot;:{&quot;.lit&quot;:null,&quot;-promises-&quot;:{&quot;gh-utils.js&quot;:null,&quot;utils.js&quot;:null}},&quot;urifragments.lit&quot;:null,&quot;functions.js&quot;:null,&quot;co&quot;:{&quot;nsole.js&quot;:null,&quot;lors.js&quot;:null},&quot;safe-encoders.js&quot;:null,&quot;unist-util-&quot;:{&quot;patch-source.js&quot;:null,&quot;select-position.js&quot;:null},&quot;git-commit-all.js&quot;:null,&quot;momento.&quot;:{&quot;lit&quot;:null,&quot;js&quot;:null}},&quot;transfomers.lit&quot;:null,&quot;test&quot;:{&quot;ing/&quot;:{&quot;compact_manifest.lit&quot;:null,&quot;in&quot;:{&quot;dex.lit&quot;:null,&quot;put_buffer.lit&quot;:null},&quot;isomorphic_git.lit&quot;:null,&quot;lightningfs.lit&quot;:null,&quot;lo&quot;:{&quot;cal_remote_files.lit&quot;:null,&quot;g/&quot;:{&quot;2021-&quot;:{&quot;05-&quot;:{&quot;09.lit&quot;:null,&quot;11.lit&quot;:null,&quot;12.lit&quot;:null,&quot;13.lit&quot;:null,&quot;15.lit&quot;:null,&quot;16.lit&quot;:null,&quot;17.lit&quot;:null,&quot;18.lit&quot;:null},&quot;w2&quot;:{&quot;0.lit&quot;:null,&quot;1.lit&quot;:null}},&quot;day.lit&quot;:null,&quot;checkforinput.js&quot;:null,&quot;today.js&quot;:null}},&quot;private_files.lit&quot;:null,&quot;runkit.lit&quot;:null,&quot;se&quot;:{&quot;lection.lit&quot;:null,&quot;rviceworker.lit&quot;:null},&quot;web_workers.lit&quot;:null,&quot;test.txt&quot;:null,&quot;getserviceworker--sw&quot;:null},&quot;.js&quot;:{&quot;&quot;:null,&quot;x&quot;:null},&quot;.ts&quot;:null},&quot;./utils/functions.js&quot;:null,&quot;litconfig.lit&quot;:null,&quot;articles/ideas&quot;:{&quot;_for.lit&quot;:null,&quot;.lit&quot;:null},&quot;.github/workflows/generate.yaml&quot;:null,&quot;unified.lit&quot;:null,&quot;ma&quot;:{&quot;nifest.json&quot;:null,&quot;rkdown.lit&quot;:null},&quot;parser/&quot;:{&quot;parser.lit&quot;:null,&quot;index.js&quot;:null,&quot;frontmatter.js&quot;:null,&quot;sections.js&quot;:null,&quot;codeblocks.js&quot;:null,&quot;mdblocks.js&quot;:null,&quot;links.js&quot;:null},&quot;components&quot;:{&quot;/&quot;:{&quot;components.lit&quot;:null,&quot;Document.jsx&quot;:null,&quot;Header.jsx&quot;:null,&quot;App.jsx&quot;:null,&quot;SelectionContext.jsx&quot;:null,&quot;Cell&quot;:{&quot;.jsx&quot;:null,&quot;Menu.jsx&quot;:null},&quot;Editor.jsx&quot;:null,&quot;CodeMeta.jsx&quot;:null,&quot;base/&quot;:{&quot;Codeblock.jsx&quot;:null,&quot;Link.jsx&quot;:null},&quot;Backlinks.jsx&quot;:null},&quot;.lit&quot;:null},&quot;../&quot;:{&quot;scratch_pad.lit#viewers&quot;:null,&quot;components/components.lit&quot;:null,&quot;../../../../&quot;:{&quot;meta/settings.lit#plantuml-viewer--repl&quot;:null,&quot;testing/log/&quot;:{&quot;2021&quot;:{&quot;&quot;:null,&quot;.lit&quot;:null},&quot;2021-&quot;:{&quot;05&quot;:{&quot;-12.lit&quot;:null,&quot;.lit&quot;:null},&quot;w20&quot;:null,&quot;w2&quot;:{&quot;1&quot;:{&quot;&quot;:null,&quot;.lit&quot;:null},&quot;0.lit&quot;:null}},&quot;year.lit&quot;:null}},&quot;utils/git-commit-all.js&quot;:null,&quot;serviceworker.js&quot;:null},&quot;viewers&quot;:{&quot;.lit&quot;:null,&quot;/meta.js&quot;:null},&quot;index&quot;:null,&quot;wiki&quot;:{&quot;-links.lit&quot;:null,&quot;links.lit&quot;:null},&quot;file&quot;:{&quot;system/index.lit&quot;:null,&quot;name&quot;:null},&quot;dummy/&quot;:{&quot;ðŸ”¥.lit&quot;:null,&quot;example.svg&quot;:null,&quot;plain.txt&quot;:null,&quot;data.csv&quot;:null},&quot;log/&quot;:{&quot;checkforinput.js&quot;:null,&quot;today.js&quot;:null},&quot;gitworker.js&quot;:null,&quot;fsviewer.jsx&quot;:null,&quot;rk.jsx&quot;:null,&quot;runkit-repl-endpoint.js&quot;:null,&quot;worker&quot;:{&quot;.js&quot;:null,&quot;2.js&quot;:null}}
A 91.78470254957507% reduction.
</code></pre></output></codecell></div></cell></section></div></div><div id="backlinks"><h4>Backlinks (1)</h4><ol><li><a title="ðŸ”¬ Tests, experiments and investigations" href="/testing/index.html">ðŸ”¬ Tests, experiments and investigations</a></li></ol></div><script src="//cdn.jsdelivr.net/npm/eruda"></script><script>eruda.init();</script><script async="" src="/web.bundle.js"></script></body></html>