# Lightning FS

https://github.com/isomorphic-git/lightning-fs

## Bugs 🐜

- [x] wikiLinks and 404 behaviour results in incorrect/dangling lfs due to incorrect baseUrl.
```js
return lit.fs.readdir('/')
```
```>txt attached=true updated=1619393664190
[ 'renderer',
  'testing',
  'index.lit',
  '.git',
  'wiki-links.lit',
  '404.lit' ]
```
## Useful? an `fs` viewer


```js !viewer of=fs

const sortBy = key => (a, b) => (a[key] > b[key]) ? 1 : -1

export const viewer = ({node, React}) => {
  const rc = React.createElement
  const {useState, useEffect} = React
  const meta = node.properties 
               && node.properties.meta
  const src = meta.ls || node.data.value.trim()
  const [content, setContent] = useState('Loading...')
  
  useEffect(async () => {
    const l = await lit.fs.readdir(src)
    const list = l.map(async x=>{
       const stat = await lit.fs.stat(src + x)
       return {f:x,t:stat.type}
       
    })
    const res = (await Promise.all(list)).sortBy('t').map(r => {
       return rc("div", {className: t.t}, `${r.f}`)
    })
    setContent(res)
  },[src])

  return rc('div', {
    className: 'custom-react-view',
  }, content)
}
```



```html !below
<style>
.custom-react-view {
  font-family: monospace;
}
.custom-react-view .dir {
  font-weight: bold;
}
.custom-react-view .dir:after {
  display:inline;
  content: "/";
}
</style>
```
```>fs ls=/

```