<html data-reactroot=""><head><title>Input Buffer</title><meta name="litsrc" value="testing/input_buffer.lit"/><meta name="litroot" value="/"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/><link rel="stylesheet" href="https://highlightjs.org/static/demo/styles/railscasts.css"/><link rel="stylesheet" href="/style.css"/></head><body><div id="lit-app"><div id="lit-header"><menu class="horizontal open has-children"><li class="MenuTitle"><a href="/">Home</a></li><li class="MenuItems"><menu class="has-children"><li class="MenuTitle">File</li></menu><menu class="has-children" disabled=""><li class="MenuTitle">Cell</li></menu><menu class="has-children" disabled=""><li class="MenuTitle">Section</li></menu><menu class="has-children"><li class="MenuTitle">Help</li></menu><menu class="has-children right"><li class="MenuTitle"><span class="led led-grey"></span></li></menu></li></menu><div class="lit-messages"><div class="lit-message"><span class="message">[Transclude] Failed to load log/checkforinput.js as testing/log/checkforinput.js</span><span class="name">3:1-7:4</span></div><div class="lit-message"><span class="message">[Transclude] Failed to load log/today.js as testing/log/today.js</span><span class="name">9:1-13:4</span></div><div class="lit-message"><span class="message">[Transclude] Failed to load log/day.lit as testing/log/day.lit</span><span class="name">128:1-130:4</span></div><div class="lit-message"><span class="message">Plugin Error (viewer): No plugin exported from module. for !plugin type=viewer of=bookmarklet</span><span class="name">134:1-141:4</span></div></div></div><div id="content"><section depth="1" class="" startpos="1:1-0" endpos="18:21-506"><cell startpos="1:1-0" endpos="1:15-14"><div class="cell-content"><h1 id="input-buffer">Input Buffer</h1></div></cell><cell startpos="3:1-16" endpos="7:4-168" class="code"><div class="cell-content"><codecell class="dir-collapse dir-hidemeta lang-js local collapsed"><span class="meta"><span class="lang">js</span><span style="color:black;background-color:#da5323" class="directive dir-collapse">collapse</span><span style="color:white;background-color:#964f82" class="directive dir-hidemeta">hidemeta</span><span class="attribute attr-exec" style="color:black;background-color:#02fb89">exec=onload</span><span class="source">&lt; log/checkforinput.js</span><span class="output">&gt; md !info</span></span><pre><code class="js"></code></pre></codecell><codecell class="dir-warn lang-md local output"><span class="meta"><span class="lang">md</span><span style="color:white;background-color:#037928" class="directive dir-warn">warn</span><span class="updatedAt">Updated <span class="Time relative">1.6d ago</span></span></span><div class="md-block dir-warn">
<p><em>Checking for input...</em></p>
</div></codecell></div></cell><cell startpos="9:1-170" endpos="13:4-481" class="code"><div class="cell-content"><codecell class="dir-collapse dir-hidemeta lang-js local collapsed"><span class="meta"><span class="lang">js</span><span style="color:black;background-color:#da5323" class="directive dir-collapse">collapse</span><span style="color:white;background-color:#964f82" class="directive dir-hidemeta">hidemeta</span><span class="attribute attr-exec" style="color:black;background-color:#02fb89">exec=onload</span><span class="source">&lt; log/today.js</span><span class="output">&gt; md !bigger</span></span><pre><code class="js"></code></pre></codecell><codecell class="dir-bigger lang-md local output"><span class="meta"><span class="lang">md</span><span style="color:white;background-color:#ad32f2" class="directive dir-bigger">bigger</span><span class="updatedAt">Updated <span class="Time relative">8m ago</span></span></span><div class="md-block dir-bigger">
<p><em>Today</em> is <a href="/testing/log/2021-05-12.html"><strong>2021-05-12</strong></a>, a log exists: <em>true</em>; See <a href="/testing/log/2021-w20.html">week</a>, <a href="/testing/log/2021-05.html">month</a> or <a href="/testing/log/year.html">year</a>.</p>
</div></codecell></div></cell><section depth="2" class="" startpos="18:1-486" endpos="18:21-506"><cell startpos="18:1-486" endpos="18:21-506"><div class="cell-content"><h2 id="table-of-contents">Table of Contents</h2><ul>
<li>
<p><a href="#about">About<span class="linkIcon">§</span></a></p>
</li>
<li>
<p><a href="#implementation">Implementation<span class="linkIcon">§</span></a></p>
<ul>
<li><a href="#core">Core<span class="linkIcon">§</span></a></li>
<li><a href="#bookmarklet">Bookmarklet<span class="linkIcon">§</span></a></li>
<li><a href="#ios-shortcut">iOS shortcut<span class="linkIcon">§</span></a></li>
</ul>
</li>
</ul></div></cell></section></section>
<section depth="2" class="" startpos="19:1-507" endpos="33:241-1595"><cell startpos="19:1-507" endpos="33:241-1595"><div class="cell-content"><h2 id="about">About</h2><p><em>Inspired by <a href="https://twitter.com/mymind">mymind<span class="linkIcon">↗</span></a> iOS app, <a href="https://twitter.com/BlackboxPuzzles">Blackbox<span class="linkIcon">↗</span></a> ios game and terrible ios clipboards.</em></p><p><strong>aka:</strong> <a href="https://en.m.wikipedia.org/wiki/Peripheral">Peripheral<span class="linkIcon">↗</span></a>, Input, AUX (Auxiliary)</p><p><a href="https://www.electronics-tutorials.ws/logic/logic_9.html"><img src="https://www.electronics-tutorials.ws/wp-content/uploads/2013/08/log35.gif?fit=161%2C59" alt="logo"/></a></p><blockquote>
<p>A peripheral or peripheral device is ancillary device used to put information into and get information out of the computer.</p>
</blockquote><blockquote>
<p>peripheria, from Ancient Greek περιφέρεια (periphéreia, “the line around the circle, circumference, part of a circle, an arc, the outer surface”)</p>
</blockquote><p>Universal ios sharesheet <del>app</del>webapp, anything shared to the app is stored, catelogued, linked and editable, sortable, searchable and explorable offline in the app.</p><blockquote>
<p>I&#x27;m prepared to wait as long as needed for Elon Musks NeuraLink to reach primetime but, We cant afford to sit around till then, we need incremental improvements of our Peripherals, over the Keyboard, Mouse and Touch Screens we have today.</p>
</blockquote></div></cell></section>
<section depth="2" class="" startpos="37:1-1599" endpos="130:4-4415"><cell startpos="37:1-1599" endpos="37:18-1616"><div class="cell-content"><h2 id="implementation">Implementation</h2></div></cell><section depth="3" class="" startpos="39:1-1618" endpos="130:4-4415"><cell startpos="39:1-1618" endpos="39:9-1626"><div class="cell-content"><h3 id="core">Core</h3></div></cell><cell startpos="42:1-1629" endpos="84:4-3036" class="code output"><div class="cell-content"><codecell class="dir-collapse lang-js local collapsed output"><a name="log/checkforinput.js"></a><span class="meta"><span class="lang">js</span><span class="filename">log/checkforinput.js</span><span style="color:black;background-color:#da5323" class="directive dir-collapse">collapse</span></span><output><pre><code class="js">const date = new Date()
const isoDate = date.toISOString().split(&quot;T&quot;)[0]
const today = isoDate
const year = date.getFullYear()
const month = isoDate.split(&#x27;-&#x27;)[1]

const firstDayOfYear = new Date(year, 0, 1);
const pastDaysOfYear = (date - firstDayOfYear) / 86400000;
const week = Math.ceil((pastDaysOfYear + firstDayOfYear.getDay() + 1) / 7);

const filename = `testing/log/${today}`

const checkForInput = async () =&gt; {
  const insp = lit.utils.inspect
  const qs = lit.utils.querystring

  const search = location.search
  const query = search
              &amp;&amp; qs.parse(search.slice(1))

  if (query?.input) {
    const input = query.input
    delete query.input
    const qsWoInput = qs.stringify(query)
    window.history.replaceState(null,null,&#x27;?&#x27; + qsWoInput)

    let stat = {local:{},remote:{}} 
    try { stat = await lit.fs.readStat(`/${filename}.lit`, {encoding: &#x27;utf8&#x27;}) } catch(err) {}
    const newContent = ((stat.local.stat &amp;&amp; stat.local.value) || stat.remote.value || `# ${today}

See [week ${week}](/testing/log/${year}-w${week}), [month ${month}](/testing/log/${year}-${month}) or [year ${year}](/testing/log/${year})
`) + (&quot;\n&quot; + input)
    await lit.fs.writeFile(`/${filename}.lit`, newContent)
    return `***Captured Input (below) to [[${filename}]]***

${input}`
    } else {
      return &quot;*No input detected.*&quot;
  }
}
return checkForInput()
</code></pre></output></codecell></div></cell><cell startpos="88:1-3040" endpos="111:4-3906" class="code output"><div class="cell-content"><codecell class="dir-collapse lang-js local collapsed output"><a name="log/today.js"></a><span class="meta"><span class="lang">js</span><span class="filename">log/today.js</span><span style="color:black;background-color:#da5323" class="directive dir-collapse">collapse</span></span><output><pre><code class="js">const date = new Date()
const isoDate = date.toISOString().split(&quot;T&quot;)[0]
const today = isoDate
const year = date.getFullYear()
const month = isoDate.split(&#x27;-&#x27;).slice(0,-1).join(&#x27;-&#x27;)

const firstDayOfYear = new Date(year, 0, 1);
const pastDaysOfYear = (date - firstDayOfYear) / 86400000;
const week = [year, &#x27;w&#x27;+ Math.ceil((pastDaysOfYear + firstDayOfYear.getDay() + 1) / 7)].join(&#x27;-&#x27;)

const prefix = `/testing/log/`
const pathFor = log =&gt; `${prefix}${log}.lit`

const checkForTodayFile = async () =&gt; { 
  let stat
  try {
  stat = await lit.fs.readStat(pathFor(today))
  } catch(err) {}
  return `*Today* is [**${today}**](${pathFor(today)}), a log exists: *${!!stat &amp;&amp; !!(stat.local.stat || stat.remote.stat)}*; See [week](${pathFor(week)}), [month](${pathFor(month)}) or [year](${pathFor(&#x27;year&#x27;)}).`
}

return checkForTodayFile()
</code></pre></output></codecell></div></cell><cell startpos="113:1-3908" endpos="119:4-3989" class="code output"><div class="cell-content"><codecell class="dir-below tag-styling lang-html local output"><span class="meta"><span class="lang">html</span><span style="color:white;background-color:#5948c3" class="directive dir-below">below</span><span style="color:white;background-color:#903a92" class="tag">styling</span></span><pre><code class="html">&lt;style&gt;
.dir-bigger {
  font-size: 1.2em;
}
&lt;/style&gt;
</code></pre><div><style>
.dir-bigger {
  font-size: 1.2em;
}
</style>
</div></codecell></div></cell><cell startpos="120:1-3990" endpos="126:4-4378" class="code"><div class="cell-content"><codecell class="dir-collapse lang-js local collapsed"><span class="meta"><span class="lang">js</span><span style="color:black;background-color:#da5323" class="directive dir-collapse">collapse</span><span class="output">&gt; md #mockinput</span></span><pre><code class="js">const qs = location.search.slice(1)
return `[Mock Input](?${qs + (qs ? &#x27;&amp;&#x27; : &#x27;&#x27;)}input=${encodeURIComponent(&quot;- [ ] some **Input** &quot; + new Date())})`
</code></pre></codecell><codecell class="tag-mockinput lang-md local output"><span class="meta"><span class="lang">md</span><span style="color:white;background-color:#5d6084" class="tag">mockinput</span><span class="updatedAt">Updated <span class="Time relative">15h ago</span></span></span><div class="md-block tag-mockinput">
<p><a href="?file=testing%2Finput_buffer.lit&amp;input=-%20%5B%20%5D%20some%20**Input**%20Wed%20May%2012%202021%2008%3A25%3A18%20GMT%2B0100%20(BST)">Mock Input<span class="linkIcon">§</span></a></p>
</div></codecell></div></cell><cell startpos="128:1-4380" endpos="130:4-4415" class="code"><div class="cell-content"><codecell class="dir-collapse lang-lit local collapsed"><span class="meta"><span class="lang">lit</span><span style="color:black;background-color:#da5323" class="directive dir-collapse">collapse</span><span class="source">&lt; log/day.lit</span></span><pre><code class="lit"></code></pre></codecell></div></cell></section></section>
<section depth="3" class="" startpos="132:1-4417" endpos="145:4-5020"><cell startpos="132:1-4417" endpos="132:16-4432"><div class="cell-content"><h3 id="bookmarklet">Bookmarklet</h3></div></cell><cell startpos="134:1-4434" endpos="141:4-4827" class="code"><div class="cell-content"><codecell class="dir-plugin lang-js local"><span class="meta"><span class="lang">js</span><span style="color:white;background-color:#c5476f" class="directive dir-plugin">plugin</span><span class="attribute attr-type" style="color:white;background-color:#0368f3">type=viewer</span><span class="attribute attr-of" style="color:black;background-color:#00dd70">of=bookmarklet</span></span><pre><code class="js">export const viewer = ({node, React}) =&gt; {
  const rc = React.createElement
  const meta = node.properties.meta
  const href = `javascript:(function(){${node.data.value}})()`
  return rc(&#x27;span&#x27;, null, [&#x27;Bookmarklet: &#x27;, rc(&#x27;a&#x27;, {href: href}, `Run ${meta &amp;&amp; meta.id ? meta.id: &quot;bookmarklet&quot;}` ), &quot; href: &quot;, rc(&#x27;pre&#x27;, null, rc(&#x27;code&#x27;, null, href))])
}
</code></pre></codecell></div></cell><cell startpos="143:1-4829" endpos="145:4-5020" class="code"><div class="cell-content"><codecell class="dir-below lang-js local"><a name="Input"></a><span class="meta"><span class="lang">js</span><span style="color:white;background-color:#5948c3" class="directive dir-below">below</span><span class="attribute attr-viewer" style="color:black;background-color:#cf5332">viewer=bookmarklet</span><span class="attribute attr-id" style="color:black;background-color:#00d1b0">id=Input</span></span><pre><code class="js">window.location.href = &quot;https://dotlit.org/testing/input_buffer.html?input=&quot; + encodeURIComponent(&quot;- [ ] [&quot;+document.title+&quot;](&quot;+location.href+&quot;)&quot;)
</code></pre></codecell></div></cell></section>
<section depth="3" class="" startpos="147:1-5022" endpos="149:243-5282"><cell startpos="147:1-5022" endpos="149:243-5282"><div class="cell-content"><h3 id="ios-shortcut">iOS shortcut</h3><p><a href="https://www.icloud.com/shortcuts/7c5e088085e34d7d981aace463dcba51">Lit 🔥 Input<span class="linkIcon">↗</span></a> an iOS shortcut which enables sending stuff from anywhere the iOS sharesheet is available, including highlighted text snippets etc, to this (your) Input Buffer.</p></div></cell></section></div></div><div id="backlinks"><h4>Backlinks (1)</h4><ol><li><a title=".lit" href="/index.html">.lit</a></li></ol></div><script src="//cdn.jsdelivr.net/npm/eruda"></script><script>eruda.init();</script><script src="/web.bundle.js"></script></body></html>