<html data-reactroot=""><head><title>üî• Input Buffer</title><meta name="litsrc" value="/testing/input_buffer.lit"/><meta name="litroot" value="/"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/><meta name="apple-mobile-web-app-capable" content="yes"/><link rel="apple-touch-icon" href="/assets/lit-logo.png"/><link rel="icon" href="/assets/lit-logo.png"/><link rel="stylesheet" href="/style.css"/></head><body><div id="lit-app"><div id="lit-header"><menu class="horizontal open has-children"><li class="MenuTitle"><a href="/">Home</a></li><li class="MenuItems"><menu class="has-children" disabled=""><li class="MenuTitle">File</li></menu><menu class="has-children" disabled=""><li class="MenuTitle">Cell</li></menu><menu class="has-children" disabled=""><li class="MenuTitle">Section</li></menu><menu class="has-children" disabled=""><li class="MenuTitle">Help</li></menu><menu class="has-children right"><li class="MenuTitle"><span class="led led-grey"></span><span class="led led-grey"></span><span class="led led-grey"></span></li></menu></li></menu></div><style>body {
  --bg: white;
  --bg-secondary-color: #efefef;
    
  --text-color: black;
  --text-secondary-color: grey;
  --text-primary-color: #9999f7;
  --text-highlight-bg: yellow;
  --text-highlight-color: black;

  --divider-subtle: #efefef;
  --medium-space: 0.4em;
  --code-bg-color: black;
  --code-text-color: white;
  --box-bg-opacity: 0.05;
}</style><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.0.0/build/styles/sunburst.min.css"/><div id="content"><section id="-input-buffer" depth="1" class="" startpos="1:1-0" endpos="93:4-2581"><div startpos="1:1-0" endpos="93:4-2581" class="cell"><div class="cell-content"><h1 id="-input-buffer">üî• Input Buffer</h1></div></div><div startpos="3:1-19" endpos="55:4-1585" class="code   cell"><div class="cell-content"><div class="dir-collapse dir-hidemeta lang-js local collapsed codecell"><span class="meta"><span class="lang">js</span><span style="color:black;background-color:#da5323" class="directive dir-collapse">collapse</span><span style="color:white;background-color:#964f82" class="directive dir-hidemeta">hidemeta</span><span class="attribute attr-exec" style="color:black;background-color:#02fb89">exec=onload</span><span class="source">&lt; log/checkforinput.js</span><span class="output">&gt; md !info</span></span><pre><code class="js">const date = new Date();
const isoDate = date.toISOString().split(&quot;T&quot;)[0];
const today = isoDate;
const year = date.getFullYear();
const month = isoDate.split(&quot;-&quot;)[1];

const firstDayOfYear = new Date(year, 0, 1);
const pastDaysOfYear = (date - firstDayOfYear) / 86400000;
const week = Math.ceil((pastDaysOfYear + firstDayOfYear.getDay() + 1) / 7);

const filename = (t) =&gt; `testing/log/${t}.lit`;

const checkForInput = async () =&gt; {
  const insp = lit.utils.inspect;
  const qs = lit.utils.querystring;

  const search = location.search;
  const query = search &amp;&amp; qs.parse(search.slice(1));

  if (query?.input) {
    const input = query.input;
    delete query.input;
    const qsWoInput = qs.stringify(query);
    window.history.replaceState(null, null, &quot;?&quot; + qsWoInput);

    let stat = { local: {}, remote: {} };
    try {
      stat = await lit.fs.readStat(`/${filename(today)}`, { encoding: &quot;utf8&quot; });
    } catch (err) {}
    const newContent =
      ((stat.local.stat &amp;&amp; stat.local.value) ||
        stat.remote.value ||
        `# ${today}

See [week ${week}](/${filename(
          year + &quot;-w&quot; + week
        )}), [month ${month}](/${filename(
          year + &quot;-&quot; + month
        )}) or [year ${year}](/${filename(year)}) or [[testing/Input Buffer]]
`) +
      (&quot;\n&quot; + input);
    await lit.fs.writeFile(`/${filename(today)}`, newContent);
    return `***Captured Input (below) to [${today}](/${filename(today)})***

${input}`;
  } else {
    return &quot;*No input detected.*&quot;;
  }
};
return checkForInput();

</code></pre></div></div></div><div startpos="59:1-1589" endpos="90:4-2532" class="code   cell"><div class="cell-content"><div class="dir-collapse dir-hidemeta lang-js local collapsed codecell"><span class="meta"><span class="lang">js</span><span style="color:black;background-color:#da5323" class="directive dir-collapse">collapse</span><span style="color:white;background-color:#964f82" class="directive dir-hidemeta">hidemeta</span><span class="attribute attr-exec" style="color:black;background-color:#02fb89">exec=onload</span><span class="source">&lt; log/today.js</span><span class="output">&gt; md !bigger</span></span><pre><code class="js">const date = new Date();
const isoDate = date.toISOString().split(&quot;T&quot;)[0];
const today = isoDate;
const year = date.getFullYear();
const month = isoDate.split(&quot;-&quot;).slice(0, -1).join(&quot;-&quot;);

const firstDayOfYear = new Date(year, 0, 1);
const pastDaysOfYear = (date - firstDayOfYear) / 86400000;
const week = [
  year,
  &quot;w&quot; + Math.ceil((pastDaysOfYear + firstDayOfYear.getDay() + 1) / 7),
].join(&quot;-&quot;);

const prefix = `/testing/log/`;
const pathFor = (log) =&gt; `${prefix}${log}.lit`;

const checkForTodayFile = async () =&gt; {
  let stat;
  try {
    stat = await lit.fs.readStat(pathFor(today));
  } catch (err) {}
  return `*Today* is [**${today}**](${pathFor(today)}), a log exists: *${
    !!stat &amp;&amp; !!(stat.local.stat || stat.remote.stat)
  }*; See [week](${pathFor(week)}), [month](${pathFor(
    month
  )}) or [year](${pathFor(year)}).`;
};

return checkForTodayFile();

</code></pre></div></div></div><div startpos="92:1-2534" endpos="93:4-2581" class="code   cell"><div class="cell-content"><div class="dir-hidemeta dir-inline lang-search local codecell"><span class="meta"><span class="lang">search</span><span style="color:white;background-color:#964f82" class="directive dir-hidemeta">hidemeta</span><span style="color:black;background-color:#b96da2" class="directive dir-inline">inline</span><span class="attribute attr-ns" style="color:black;background-color:#00dc50">ns=/testing/log</span></span><div class="custom-react-view"><input style="width:100%;font-size:1.2em" value=""/></div></div></div></div><section id="table-of-contents" depth="2" class="" startpos="95:1-2583" endpos="95:21-2603"><div startpos="95:1-2583" endpos="95:21-2603" class="cell"><div class="cell-content"><h2 id="table-of-contents">Table of Contents</h2></div></div><div class="cell"><div class="cell-content"><ul>
<li>
<p><a class="fragment" href="#about">About<span class="linkIcon">¬ß</span></a></p>
<ul>
<li><a class="fragment" href="#bookmarklet">Bookmarklet<span class="linkIcon">¬ß</span></a></li>
<li><a class="fragment" href="#ios-shortcut">iOS shortcut<span class="linkIcon">¬ß</span></a></li>
</ul>
</li>
<li>
<p><a class="fragment" href="#implementation">Implementation<span class="linkIcon">¬ß</span></a></p>
<ul>
<li><a class="fragment" href="#bugs-and-todos">Bugs and Todos<span class="linkIcon">¬ß</span></a></li>
<li><a class="fragment" href="#core">Core<span class="linkIcon">¬ß</span></a></li>
</ul>
</li>
</ul></div></div></section><section id="about" depth="2" class="" startpos="97:1-2605" endpos="111:241-3697"><div startpos="97:1-2605" endpos="111:241-3697" class="cell"><div class="cell-content"><h2 id="about">About</h2></div></div><div startpos="99:1-2615" endpos="111:241-3697" class="cell"><div class="cell-content"><p><em>Inspired by <a class="external" href="https://twitter.com/mymind" filepath="/testing/input_buffer.lit" root="" data="[object Object]">mymind<span class="linkIcon">‚Üó</span></a> iOS app, <a class="external" href="https://twitter.com/BlackboxPuzzles" filepath="/testing/input_buffer.lit" root="" data="[object Object]">Blackbox<span class="linkIcon">‚Üó</span></a> iOS game and terrible iOS clipboards.</em></p><p><strong>aka:</strong> <a class="external" href="https://en.m.wikipedia.org/wiki/Peripheral" filepath="/testing/input_buffer.lit" root="" data="[object Object]">Peripheral<span class="linkIcon">‚Üó</span></a>, Input, AUX (Auxiliary)</p><p><a class="external" href="https://www.electronics-tutorials.ws/logic/logic_9.html" filepath="/testing/input_buffer.lit" root="" data="[object Object]"><img src="https://www.electronics-tutorials.ws/wp-content/uploads/2013/08/log35.gif?fit=161%2C59" alt="logo"/></a></p><blockquote>
<p>A peripheral or peripheral device is  an auxiliary device used to put information into and get information out of the computer.</p>
</blockquote><blockquote>
<p>peripheria, from Ancient Greek œÄŒµœÅŒπœÜŒ≠œÅŒµŒπŒ± (periph√©reia, ‚Äúthe line around the circle, circumference, part of a circle, an arc, the outer surface‚Äù)</p>
</blockquote><p>Universal ios sharesheet <del>app</del>webapp, anything shared to the app is stored, catelogued, linked and editable, sortable, searchable and explorable offline in the app.</p><blockquote>
<p>I&#x27;m prepared to wait as long as needed for Elon Musks NeuraLink to reach primetime but, We cant afford to sit around till then, we need incremental improvements of our Peripherals, over the Keyboard, Mouse and Touch Screens we have today.</p>
</blockquote></div></div><section id="bookmarklet" depth="3" class="" startpos="112:1-3698" endpos="118:4-3919"><div startpos="112:1-3698" endpos="118:4-3919" class="cell"><div class="cell-content"><h3 id="bookmarklet">Bookmarklet</h3></div></div><div startpos="116:1-3717" endpos="118:4-3919" class="code   cell"><div class="cell-content"><div class="dir-inline dir-hidemeta lang-js local codecell"><a name="Input"></a><span class="meta"><span class="lang">js</span><span style="color:black;background-color:#b96da2" class="directive dir-inline">inline</span><span style="color:white;background-color:#964f82" class="directive dir-hidemeta">hidemeta</span><span class="attribute attr-viewer" style="color:black;background-color:#cf5332">viewer=bookmarklet</span><span class="attribute attr-id" style="color:black;background-color:#00d1b0">id=Input</span></span><span>Bookmarklet: <a href="javascript:(function(){window.location.href = &quot;https://dotlit.org/testing/input_buffer.html?input=&quot; + encodeURIComponent(&quot;- [ ] [&quot;+document.title+&quot;](&quot;+location.href+&quot;)&quot;)
})()">Run Input</a> href: <pre><code>javascript:(function(){window.location.href = &quot;https://dotlit.org/testing/input_buffer.html?input=&quot; + encodeURIComponent(&quot;- [ ] [&quot;+document.title+&quot;](&quot;+location.href+&quot;)&quot;)
})()</code></pre></span></div></div></div></section><section id="ios-shortcut" depth="3" class="" startpos="119:1-3920" endpos="121:243-4180"><div startpos="119:1-3920" endpos="121:243-4180" class="cell"><div class="cell-content"><h3 id="ios-shortcut">iOS shortcut</h3></div></div><div startpos="121:1-3938" endpos="121:243-4180" class="cell"><div class="cell-content"><p><a class="external" href="https://www.icloud.com/shortcuts/7c5e088085e34d7d981aace463dcba51" filepath="/testing/input_buffer.lit" root="" data="[object Object]">Lit üî• Input<span class="linkIcon">‚Üó</span></a> an iOS shortcut which enables sending stuff from anywhere the iOS sharesheet is available, including highlighted text snippets etc, to this (your) Input Buffer.</p></div></div></section></section><section id="implementation" depth="2" class="" startpos="124:1-4183" endpos="124:18-4200"><div startpos="124:1-4183" endpos="124:18-4200" class="cell"><div class="cell-content"><h2 id="implementation">Implementation</h2></div></div><section id="bugs-and-todos" depth="3" class="" startpos="126:1-4202" endpos="136:4-4722"><div startpos="126:1-4202" endpos="136:4-4722" class="cell"><div class="cell-content"><h3 id="bugs-and-todos">Bugs and Todos</h3></div></div><div startpos="128:1-4222" endpos="129:16-4282" class="cell"><div class="cell-content"><ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <code>exec=onload</code> output is <em>still</em> buggy.</li>
<li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->Search üîç</li>
</ul></div></div><div startpos="130:1-4283" endpos="136:4-4722" class="code   cell"><div class="cell-content"><div class="dir-collapse tag-mockinput lang-js local collapsed codecell"><span class="meta"><span class="lang">js</span><span style="color:black;background-color:#da5323" class="directive dir-collapse">collapse</span><span style="color:white;background-color:#5d6084" class="tag">mockinput</span><span class="output">&gt; md</span></span><pre><code class="js">const qs = location.search.slice(1)
return `Here&#x27;s a [Mock Input](?${qs + (qs ? &#x27;&amp;&#x27; : &#x27;&#x27;)}input=${encodeURIComponent(&quot;- [ ] some **Input** &quot; + new Date())}) to test input capture.`
</code></pre></div><div class="lang-md local codecell output"><span class="meta"><span class="lang">md</span><span class="updatedAt">Updated <span class="Time relative">57.4w ago</span></span></span><div class="md-block">
<p>Here&#x27;s a <a class="fragment" href="?file=testing/input_buffer.lit&amp;input=-%20%5B%20%5D%20some%20**Input**%20Sun%20May%2016%202021%2013%3A12%3A23%20GMT%2B0100%20(BST)" filepath="/testing/input_buffer.lit" root="" data="[object Object]">Mock Input<span class="linkIcon">¬ß</span></a> to test input capture.</p>
</div></div></div></div></section><section id="core" depth="3" class="" startpos="138:1-4724" endpos="253:4-7772"><div startpos="138:1-4724" endpos="253:4-7772" class="cell"><div class="cell-content"><h3 id="core">Core</h3></div></div><div startpos="141:1-4735" endpos="193:4-6295" class="code output  cell"><div class="cell-content"><div class="dir-collapse lang-js local collapsed codecell output"><a name="log/checkforinput.js"></a><span class="meta"><span class="lang">js</span><span class="filename">log/checkforinput.js</span><span style="color:black;background-color:#da5323" class="directive dir-collapse">collapse</span></span><output><pre><code class="js">const date = new Date();
const isoDate = date.toISOString().split(&quot;T&quot;)[0];
const today = isoDate;
const year = date.getFullYear();
const month = isoDate.split(&quot;-&quot;)[1];

const firstDayOfYear = new Date(year, 0, 1);
const pastDaysOfYear = (date - firstDayOfYear) / 86400000;
const week = Math.ceil((pastDaysOfYear + firstDayOfYear.getDay() + 1) / 7);

const filename = (t) =&gt; `testing/log/${t}.lit`;

const checkForInput = async () =&gt; {
  const insp = lit.utils.inspect;
  const qs = lit.utils.querystring;

  const search = location.search;
  const query = search &amp;&amp; qs.parse(search.slice(1));

  if (query?.input) {
    const input = query.input;
    delete query.input;
    const qsWoInput = qs.stringify(query);
    window.history.replaceState(null, null, &quot;?&quot; + qsWoInput);

    let stat = { local: {}, remote: {} };
    try {
      stat = await lit.fs.readStat(`/${filename(today)}`, { encoding: &quot;utf8&quot; });
    } catch (err) {}
    const newContent =
      ((stat.local.stat &amp;&amp; stat.local.value) ||
        stat.remote.value ||
        `# ${today}

See [week ${week}](/${filename(
          year + &quot;-w&quot; + week
        )}), [month ${month}](/${filename(
          year + &quot;-&quot; + month
        )}) or [year ${year}](/${filename(year)}) or [[testing/Input Buffer]]
`) +
      (&quot;\n&quot; + input);
    await lit.fs.writeFile(`/${filename(today)}`, newContent);
    return `***Captured Input (below) to [${today}](/${filename(today)})***

${input}`;
  } else {
    return &quot;*No input detected.*&quot;;
  }
};
return checkForInput();

</code></pre></output></div></div></div><div startpos="197:1-6299" endpos="228:4-7211" class="code output  cell"><div class="cell-content"><div class="dir-collapse lang-js local collapsed codecell output"><a name="log/today.js"></a><span class="meta"><span class="lang">js</span><span class="filename">log/today.js</span><span style="color:black;background-color:#da5323" class="directive dir-collapse">collapse</span></span><output><pre><code class="js">const date = new Date();
const isoDate = date.toISOString().split(&quot;T&quot;)[0];
const today = isoDate;
const year = date.getFullYear();
const month = isoDate.split(&quot;-&quot;).slice(0, -1).join(&quot;-&quot;);

const firstDayOfYear = new Date(year, 0, 1);
const pastDaysOfYear = (date - firstDayOfYear) / 86400000;
const week = [
  year,
  &quot;w&quot; + Math.ceil((pastDaysOfYear + firstDayOfYear.getDay() + 1) / 7),
].join(&quot;-&quot;);

const prefix = `/testing/log/`;
const pathFor = (log) =&gt; `${prefix}${log}.lit`;

const checkForTodayFile = async () =&gt; {
  let stat;
  try {
    stat = await lit.fs.readStat(pathFor(today));
  } catch (err) {}
  return `*Today* is [**${today}**](${pathFor(today)}), a log exists: *${
    !!stat &amp;&amp; !!(stat.local.stat || stat.remote.stat)
  }*; See [week](${pathFor(week)}), [month](${pathFor(
    month
  )}) or [year](${pathFor(year)}).`;
};

return checkForTodayFile();

</code></pre></output></div></div></div><div startpos="230:1-7213" endpos="234:4-7289" class="code   cell"><div class="cell-content"><div class="dir-below dir-collapse lang-css local collapsed codecell"><span class="meta"><span class="lang">css</span><span style="color:white;background-color:#5948c3" class="directive dir-below">below</span><span style="color:black;background-color:#da5323" class="directive dir-collapse">collapse</span><span class="attribute attr-viewer" style="color:black;background-color:#cf5332">viewer=style</span></span><pre><code class="css">.dir-bigger {
  font-size: 1.2em;
}
</code></pre><style>.dir-bigger {
  font-size: 1.2em;
}
</style></div></div></div><div startpos="237:1-7292" endpos="239:4-7337" class="code   cell"><div class="cell-content"><div class="dir-collapse tag-template lang-lit local collapsed codecell"><span class="meta"><span class="lang">lit</span><span style="color:black;background-color:#da5323" class="directive dir-collapse">collapse</span><span style="color:white;background-color:#b13acc" class="tag">template</span><span class="source">&lt; log/day.lit</span></span><pre><code class="lit"># ${(new Date()).toISOString().split(&quot;T&quot;)[0]}

- created from template 

```
${new Date()}
```
</code></pre></div></div></div><div startpos="240:1-7338" endpos="253:4-7772" class="code   cell"><div class="cell-content"><div class="dir-plugin dir-collapse lang-js local collapsed codecell"><span class="meta"><span class="lang">js</span><span style="color:white;background-color:#c5476f" class="directive dir-plugin">plugin</span><span style="color:black;background-color:#da5323" class="directive dir-collapse">collapse</span><span class="attribute attr-type" style="color:white;background-color:#0368f3">type=viewer</span><span class="attribute attr-of" style="color:black;background-color:#00dd70">of=bookmarklet</span></span><pre><code class="js">export const viewer = ({ node, React }) =&gt; {
  const rc = React.createElement;
  const meta = node.properties.meta;
  const href = `javascript:(function(){${node.data.value}})()`;
  return rc(&quot;span&quot;, null, [
    &quot;Bookmarklet: &quot;,
    rc(&quot;a&quot;, { href: href }, `Run ${meta &amp;&amp; meta.id ? meta.id : &quot;bookmarklet&quot;}`),
    &quot; href: &quot;,
    rc(&quot;pre&quot;, null, rc(&quot;code&quot;, null, href)),
  ]);
};

</code></pre></div></div></div></section></section></section></div></div><div id="backlinks"><h4>Backlinks (29)</h4><ol><li><a title="üî¨ Tests, experiments and investigations" href="/testing/index.html">üî¨ Tests, experiments and investigations</a></li><li><a title="2021-06-29" href="/testing/log/2021-06-29.html">2021-06-29</a></li><li><a title="2021-07-16" href="/testing/log/2021-07-16.html">2021-07-16</a></li><li><a title="2021-07-17" href="/testing/log/2021-07-17.html">2021-07-17</a></li><li><a title="2021-07-19" href="/testing/log/2021-07-19.html">2021-07-19</a></li><li><a title="2021-07-20" href="/testing/log/2021-07-20.html">2021-07-20</a></li><li><a title="2021-07-21" href="/testing/log/2021-07-21.html">2021-07-21</a></li><li><a title="2021-07-22" href="/testing/log/2021-07-22.html">2021-07-22</a></li><li><a title="2021-07-23" href="/testing/log/2021-07-23.html">2021-07-23</a></li><li><a title="2021-07-24" href="/testing/log/2021-07-24.html">2021-07-24</a></li><li><a title="2021-07-26" href="/testing/log/2021-07-26.html">2021-07-26</a></li><li><a title="2021-07-29" href="/testing/log/2021-07-29.html">2021-07-29</a></li><li><a title="2021-08-04" href="/testing/log/2021-08-04.html">2021-08-04</a></li><li><a title="2021-08-05" href="/testing/log/2021-08-05.html">2021-08-05</a></li><li><a title="2021-08-06" href="/testing/log/2021-08-06.html">2021-08-06</a></li><li><a title="2021-08-10" href="/testing/log/2021-08-10.html">2021-08-10</a></li><li><a title="2021-08-12" href="/testing/log/2021-08-12.html">2021-08-12</a></li><li><a title="2021-08-13" href="/testing/log/2021-08-13.html">2021-08-13</a></li><li><a title="2021-08-18" href="/testing/log/2021-08-18.html">2021-08-18</a></li><li><a title="2021-08-20" href="/testing/log/2021-08-20.html">2021-08-20</a></li><li><a title="2021-08-25" href="/testing/log/2021-08-25.html">2021-08-25</a></li><li><a title="2021-08-29" href="/testing/log/2021-08-29.html">2021-08-29</a></li><li><a title="2021-09-03" href="/testing/log/2021-09-03.html">2021-09-03</a></li><li><a title="2021-09-04" href="/testing/log/2021-09-04.html">2021-09-04</a></li><li><a title="2021-09-06" href="/testing/log/2021-09-06.html">2021-09-06</a></li><li><a title="2022-06-09" href="/testing/log/2022-06-09.html">2022-06-09</a></li><li><a title="2022-06-11" href="/testing/log/2022-06-11.html">2022-06-11</a></li><li><a title="2022-06-15" href="/testing/log/2022-06-15.html">2022-06-15</a></li><li><a title="2022-06-22" href="/testing/log/2022-06-22.html">2022-06-22</a></li></ol></div><script src="//cdn.jsdelivr.net/npm/eruda"></script><script>eruda.init();</script><script async="" src="/web.bundle.js"></script></body></html>