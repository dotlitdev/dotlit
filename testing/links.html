<html data-reactroot=""><head><title>Links</title><meta name="litsrc" value="/testing/links.lit"/><meta name="litroot" value="/"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/><link rel="stylesheet" href="/style.css"/></head><body><div id="lit-app"><div id="lit-header"><menu class="horizontal open has-children"><li class="MenuTitle"><a href="/">Home</a></li><li class="MenuItems"><menu class="has-children" disabled=""><li class="MenuTitle">File</li></menu><menu class="has-children" disabled=""><li class="MenuTitle">Cell</li></menu><menu class="has-children" disabled=""><li class="MenuTitle">Section</li></menu><menu class="has-children" disabled=""><li class="MenuTitle">Help</li></menu><menu class="has-children right"><li class="MenuTitle"><span class="led led-grey"></span><span class="led led-grey"></span><span class="led led-grey"></span></li></menu></li></menu></div><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.0.0/build/styles/sunburst.min.css"/><div id="content"><section id="links" depth="1" class="" startpos="1:1-0" endpos="17:318-995"><cell startpos="1:1-0" endpos="11:30-426"><div class="cell-content"><h1>Links</h1><p>Links in <code>.lit</code> are comprised of two main types <strong>Standard</strong> and <strong>wiki-links</strong>.
much of the complexity is a result of considering the second type.</p><p><a class="exists local" href="index.html" filepath="/testing/links.lit" root="" data="[object Object]" canonical="/testing/index.lit">Standard</a> and <a class="fragment" href="#standard-links" filepath="/testing/links.lit" root="" data="[object Object]" canonical="#standard-links">Anchored/Section<span class="linkIcon">§</span></a>, <a class="exists local" href="../wiki-links.html" title="wiki-links" wikilink="true" filepath="/testing/links.lit" root="" data="[object Object]" canonical="/wiki-links.lit">wiki-links</a>, inline <a class="local" href="https://example.com" title="Example">references</a> and [undefined refs], footnotes<sup id="fnref-1"><a class="footnote-ref" href="#fn-1">1</a></sup> and <a class="external" href="https://exqmple.com" filepath="/testing/links.lit" root="" data="[object Object]" canonical="https://exqmple.com">external<span class="linkIcon">↗</span></a> links</p></div></cell><section id="standard-links" depth="2" class="" startpos="13:1-428" endpos="17:318-995"><cell startpos="13:1-428" endpos="17:318-995"><div class="cell-content"><h2>Standard links</h2><p>Should for the most part behave as expected, with the recommendation being that you should link to the source for other <code>.lit</code>/Mardown documents and the resultant <code>html</code> should convert to <code>.html</code> extention automatically for you.</p><p>For most sub types (I.e relative links, fragments, and external links) this introduces no additional complexity but for absolute links an assumption has to be made that either a. the file is served from the root of the host domain ie <code>/example/absolute.md</code> or b. that the rendered page includes a <code>baseUrl</code> mechanism.</p></div></cell></section></section>
<section id="wikilinks" depth="2" class="" startpos="19:1-997" endpos="45:182-1844"><cell startpos="19:1-997" endpos="34:43-1491"><div class="cell-content"><h2>WikiLinks</h2><p>These are a <a class="external" href="https://en.m.wikipedia.org/wiki/Help:Link" filepath="/testing/links.lit" root="" data="[object Object]" canonical="https://en.m.wikipedia.org/wiki/Help:Link">convention introduced by Wiki<span class="linkIcon">↗</span></a> and rely on a few assumptions.</p><ol>
<li>There is a canonical item to link to</li>
<li>Or a system for handling disambiguation</li>
</ol><p>Many Markdown implementations tackle this by either</p><ol>
<li>assuming an entirely Flat directory structure</li>
<li>or providing a set of known permalinks to the resolver</li>
</ol><p>Interesting alternative solutions</p><ol>
<li>[Describe <a class="local" href="../agora.html" title="Agora" wikilink="true" filepath="/testing/links.lit" root="" data="[object Object]" canonical="/agora.lit">Agora</a>.org approach]</li>
<li>behave as search links [find reference]</li>
</ol></div></cell><section id="to-do" depth="3" class="" startpos="37:1-1494" endpos="45:182-1844"><cell startpos="37:1-1494" endpos="42:23-1650"><div class="cell-content"><h3>To Do</h3><ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->with slashes: <a class="local" href="../utils/fs.html" title="utils/fs" wikilink="true" filepath="/testing/links.lit" root="" data="[object Object]" canonical="/utils/fs.lit">utils/fs</a></li>
<li class="task-list-item"><input type="checkbox" disabled=""/> <!-- -->with fragments: <a class="local" href="../utils/uri.html" title="utils/uri#fragments" wikilink="true" filepath="/testing/links.lit" root="" data="[object Object]" canonical="/utils/uri.lit">utils/uri#fragments</a>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled=""/> <!-- -->only fragments like <a class="local" href="undefined.html" title="#Wikilinks" wikilink="true" filepath="/testing/links.lit" root="" data="[object Object]" canonical="/testing/undefined.lit">#Wikilinks</a></li>
<li class="task-list-item"><input type="checkbox" disabled=""/> <!-- -->Hoist fragment</li>
</ul>
</li>
</ul></div></cell><section id="bonus" depth="4" class="" startpos="43:1-1651" endpos="45:182-1844"><cell startpos="43:1-1651" endpos="45:182-1844"><div class="cell-content"><h4>Bonus</h4><ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled=""/> <!-- -->Resolve index file links without the need for excessive duplication. ie <a class="exists local" href="../parser/parser.html" title="parser/parser" wikilink="true" filepath="/testing/links.lit" root="" data="[object Object]" canonical="/parser/parser.lit">parser/parser</a> or <a class="exists local" href="index.html" title="testing/index" wikilink="true" filepath="/testing/links.lit" root="" data="[object Object]" canonical="/testing/index.lit">testing/index</a> instead should just be able to write <a class="local" href="../parser.html" title="parser" wikilink="true" filepath="/testing/links.lit" root="" data="[object Object]" canonical="/parser.lit">parser</a> and <a class="exists local" href="index.html" title="testing" wikilink="true" filepath="/testing/links.lit" root="" data="[object Object]" canonical="/testing/index.lit">testing</a>.</li>
</ul></div></cell></section></section></section>
<section id="testing" depth="2" class="" startpos="49:1-1848" endpos="136:4-3906"><cell startpos="49:1-1848" endpos="51:42-1901"><div class="cell-content"><h2>Testing</h2><p>Implementation is at <a class="exists local" href="../parser/parser.html" title="../parser/parser" wikilink="true" filepath="/testing/links.lit" root="" data="[object Object]" canonical="/parser/parser.lit">../parser/parser</a></p></div></cell><cell startpos="55:1-1905" endpos="64:4-2174" class="code"><div class="cell-content"><codecell class="lang-js local"><span class="meta"><span class="lang">js</span></span><pre><code class="js">return lit.parser.utils.links;
</code></pre></codecell><codecell class="lang-txt local output"><span class="meta"><span class="lang">txt</span><span class="updatedAt">Updated <span class="Time relative">52.5w ago</span></span></span><output><pre><code class="txt">{ resolveLinks: [Function: resolveLinks],
  wikiLinkOptions: [Function: wikiLinkOptions],
  resolver: [Function: p],
  linkToUrl: [Function: h],
  decorateLinkNode: [Function: m] }
</code></pre></output></codecell></div></cell><cell startpos="66:1-2176" endpos="136:4-3906" class="code"><div class="cell-content"><codecell class="lang-js local"><span class="meta"><span class="lang">js</span></span><pre><code class="js">const { wikiLinkOptions, linkToUrl, decorateLinkNode } = lit.parser.utils.links

const resolve = wikiLinkOptions().pageResolver;

// console.info(resolve.toString())
// console.info(linkToUrl.toString())

const root = &quot;/&quot;;
const type = &quot;wikiLink&quot;;
const example = &quot;testing/Links?foo=bar#baz|Title&quot;;
const resolved = resolve(example);
const link = {
  type,
  data: { permalink: resolved[0] },
  url: example,
  value: example,
};

const url = linkToUrl(link, root);

console.log({ root, example, resolved, link , url});

const decorated = decorateLinkNode(link);
return JSON.stringify(decorated, null, 2);

</code></pre></codecell><codecell class="lang-txt local output"><span class="meta"><span class="lang">txt</span><span class="updatedAt">Updated <span class="Time relative">52.5w ago</span></span></span><output><pre><code class="txt">{ root: &#x27;/&#x27;,
  example: &#x27;testing/Links?foo=bar#baz|Title&#x27;,
  resolved: [ &#x27;/testing/links.lit&#x27;, &#x27;/testing/links.md&#x27;, &#x27;/testing/links&#x27; ],
  link: 
   { type: &#x27;wikiLink&#x27;,
     data: { permalink: &#x27;/testing/links.lit&#x27; },
     url: &#x27;testing/Links?foo=bar#baz|Title&#x27;,
     value: &#x27;testing/Links?foo=bar#baz|Title&#x27; },
  url: &#x27;/testing/links.lit&#x27; }
{
  &quot;type&quot;: &quot;link&quot;,
  &quot;data&quot;: {
    &quot;isExternal&quot;: false,
    &quot;isAbsolute&quot;: true,
    &quot;isFragment&quot;: false,
    &quot;isRelative&quot;: false,
    &quot;canonical&quot;: &quot;/testing/links.lit&quot;,
    &quot;wikilink&quot;: true,
    &quot;hProperties&quot;: {
      &quot;wikilink&quot;: true,
      &quot;filepath&quot;: &quot;&quot;,
      &quot;root&quot;: &quot;&quot;,
      &quot;data&quot;: {
        &quot;base&quot;: &quot;/testing/links.lit&quot;,
        &quot;isExternal&quot;: false,
        &quot;isAbsolute&quot;: true,
        &quot;isFragment&quot;: false,
        &quot;isRelative&quot;: false,
        &quot;canonical&quot;: &quot;/testing/links.lit&quot;,
        &quot;wikilink&quot;: true
      }
    }
  },
  &quot;url&quot;: &quot;testing/links.html&quot;,
  &quot;title&quot;: &quot;testing/Links?foo=bar#baz|Title&quot;,
  &quot;children&quot;: [
    {
      &quot;type&quot;: &quot;text&quot;,
      &quot;value&quot;: &quot;testing/Links?foo=bar#baz|Title&quot;
    }
  ]
}
</code></pre></output></codecell></div></cell></section>
<div class="footnotes">
<hr/>
<ol>
<li id="fn-1">footnote
With multi line <code>content</code><a class="footnote-backref" href="#fnref-1">↩</a></li>
</ol>
</div></div></div><div id="backlinks"><h4>Backlinks (4)</h4><ol><li><a title=".lit" href="/index.html">.lit</a></li><li><a title="🔬 Tests, experiments and investigations" href="/testing/index.html">🔬 Tests, experiments and investigations</a></li><li><a title="2021-05-25" href="/testing/log/2021-05-25.html">2021-05-25</a></li><li><a title="testing/paths.lit" href="/testing/paths.html">testing/paths.lit</a></li></ol></div><script src="//cdn.jsdelivr.net/npm/eruda"></script><script>eruda.init();</script><script async="" src="/web.bundle.js"></script></body></html>