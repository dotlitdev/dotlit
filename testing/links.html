<html data-reactroot=""><head><title>Links</title><meta name="litsrc" value="testing/links.lit"/><meta name="litroot" value="/"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/><link rel="stylesheet" href="https://highlightjs.org/static/demo/styles/railscasts.css"/><link rel="stylesheet" href="/style.css"/></head><body><div id="lit-app"><div id="lit-header"><menu class="horizontal open has-children"><li class="MenuTitle"><a href="/">Home</a></li><li class="MenuItems"><menu class="has-children"><li class="MenuTitle">File</li></menu><menu class="has-children" disabled=""><li class="MenuTitle">Cell</li></menu><menu class="has-children" disabled=""><li class="MenuTitle">Section</li></menu><menu class="has-children"><li class="MenuTitle">Help</li></menu><menu class="has-children right"><li class="MenuTitle"><span class="led led-grey"></span></li></menu></li></menu><div class="lit-messages"></div></div><div id="content"><section depth="1" class="" startpos="1:1-0" endpos="10:318-726"><cell startpos="1:1-0" endpos="4:67-157"><div class="cell-content"><h1 id="links">Links</h1><p>Links in <code>.lit</code> are comprised of two main types <a href="#">Standard<span class="linkIcon">Â§</span></a> and <a href="wiki-links.html?file=wiki-links.lit" title="wiki-links" wikilink="true">wiki-links</a>.
much of the complexity is a result of considering the second type.</p></div></cell><section depth="2" class="" startpos="6:1-159" endpos="10:318-726"><cell startpos="6:1-159" endpos="10:318-726"><div class="cell-content"><h2 id="standard-links">Standard links</h2><p>Should for the most part behave as expected, with the recommendation being that you should link to the source for other <code>.lit</code>/Mardown documents and the resultant <code>html</code> should convert to <code>.html</code> extention automatically for you.</p><p>For most sub types (I.e relative links, fragments, and external links) this introduces no additional complexity but for absolute links an assumption has to be made that either a. the file is served from the root of the host domain ie <code>/example/absolute.md</code> or b. that the rendered page includes a <code>baseUrl</code> mechanism.</p></div></cell></section></section>
<section depth="2" class="" startpos="12:1-728" endpos="27:43-1218"><cell startpos="12:1-728" endpos="27:43-1218"><div class="cell-content"><h2 id="wikilinks">WikiLinks</h2><p>These are a <a href="https://en.m.wikipedia.org/wiki/Help:Link">convention introduced by Wiki<span class="linkIcon">â†—</span></a> and rely on a few assumptions.</p><ol>
<li>There is a canonical item to link to</li>
<li>Or a system for handling disambiguation</li>
</ol><p>Many Markdown implementations tackle this by either</p><ol>
<li>assuming an entirely Flat directory structure</li>
<li>or providing a set of known permalinks to the resolver</li>
</ol><p>Interesting alternative solutions</p><ol>
<li>[Describe Agora.org approach]</li>
<li>behave as search links [find reference]</li>
</ol></div></cell></section>
<section depth="2" class="" startpos="29:1-1220" endpos="187:4-4948"><cell startpos="29:1-1220" endpos="31:42-1273"><div class="cell-content"><h2 id="testing">Testing</h2><p>Implementation is at <a href="/parser/parser.html?file=/parser/parser.lit" title="../parser/parser" wikilink="true">../parser/parser</a></p></div></cell><cell startpos="33:1-1275" endpos="68:4-2072" class="code"><div class="cell-content"><codecell class="tag-better tag-resolver lang-js local"><span class="meta"><span class="lang">js</span><span style="color:white;background-color:#ad0adf" class="tag">better</span><span style="color:black;background-color:#eba7bc" class="tag">resolver</span></span><pre><code class="js">const slug = (str) =&gt;
  str
    .replace(/[^\w\s/-]+/g, &quot;&quot;)
    .trim()
    .replace(/\s+/g, &quot;_&quot;)
    .toLowerCase();

const resolve = (str) =&gt; {
  const [main, title] = str.split(&quot;|&quot;);
  const [doc, hash] = main.split(&quot;#&quot;);
  const [base, query] = doc.split(&quot;?&quot;);

  console.log(&quot;Input: &quot; + str);

  const path = base &amp;&amp; slug(base);
  const section = hash &amp;&amp; slug(hash);

  const href = path + (query ? &quot;?&quot; + query : &quot;&quot;) + (hash ? &quot;#&quot; + section : &quot;&quot;);

  return { title, path, hash, query, section, href };
};
const link = resolve(&quot;explicit.ext|Title&quot;);

return link;

</code></pre></codecell><codecell class="lang-txt local output"><span class="meta"><span class="lang">txt</span><span class="updatedAt">Updated <span class="Time relative">13h ago</span></span></span><output><pre><code class="txt">Input: explicit.ext|Title
{ title: &#x27;Title&#x27;,
  path: &#x27;explicitext&#x27;,
  hash: undefined,
  query: undefined,
  section: undefined,
  href: &#x27;explicitext&#x27; }
</code></pre></output></codecell></div></cell><cell startpos="69:1-2073" endpos="77:4-2368" class="code output"><div class="cell-content"><codecell class="lang-txt local output"><span class="meta"><span class="lang">txt</span><span class="updatedAt">Updated <span class="Time relative">21.9h ago</span></span></span><output><pre><code class="txt">Input: example/Article About stuff?query=foo#A sub section|Title
{ title: &#x27;Title&#x27;,
  path: &#x27;example/article_about_stuff&#x27;,
  hash: &#x27;A sub section&#x27;,
  query: &#x27;query=foo&#x27;,
  section: &#x27;a_sub_section&#x27;,
  href: &#x27;example/article_about_stuff?query=foo#a_sub_section&#x27; }
</code></pre></output></codecell></div></cell><cell startpos="78:1-2369" endpos="146:4-3922" class="code"><div class="cell-content"><codecell class="lang-js local"><span class="meta"><span class="lang">js</span></span><pre><code class="js">const { wikiLinkOptions, linkToUrl, decorateLinkNode } = lit.parser.utils;

const resolve = wikiLinkOptions().pageResolver;

// console.info(resolve.toString())
// console.info(linkToUrl.toString())

const root = &quot;/&quot;;
const type = &quot;wikiLink&quot;;
const example = &quot;My cool ðŸ˜Ž link&quot;;
const resolved = resolve(example);
const link = {
  type,
  data: { permalink: resolved[0] },
  url: example,
  value: example,
};

const url = linkToUrl(link, root);

console.log({ root, example, resolved, link , url});

const decorated = decorateLinkNode(link);
return JSON.stringify(decorated, null, 2);

</code></pre></codecell><codecell class="lang-txt local output"><span class="meta"><span class="lang">txt</span><span class="updatedAt">Updated <span class="Time relative">23.4h ago</span></span></span><output><pre><code class="txt">{ root: &#x27;/&#x27;,
  example: &#x27;My cool ðŸ˜Ž link&#x27;,
  resolved: [ &#x27;my_cool_link&#x27; ],
  link: 
   { type: &#x27;wikiLink&#x27;,
     data: { permalink: &#x27;my_cool_link&#x27; },
     url: &#x27;My cool ðŸ˜Ž link&#x27;,
     value: &#x27;My cool ðŸ˜Ž link&#x27; },
  url: &#x27;/my_cool_link.lit&#x27; }
{
  &quot;type&quot;: &quot;link&quot;,
  &quot;data&quot;: {
    &quot;isExternal&quot;: false,
    &quot;isAbsolute&quot;: false,
    &quot;isFragment&quot;: false,
    &quot;isRelative&quot;: true,
    &quot;canonical&quot;: &quot;my_cool_link.lit&quot;,
    &quot;wikilink&quot;: true,
    &quot;hProperties&quot;: {
      &quot;wikilink&quot;: true,
      &quot;data&quot;: {
        &quot;base&quot;: &quot;my_cool_link.html&quot;,
        &quot;isExternal&quot;: false,
        &quot;isAbsolute&quot;: false,
        &quot;isFragment&quot;: false,
        &quot;isRelative&quot;: true,
        &quot;canonical&quot;: &quot;my_cool_link.lit&quot;,
        &quot;wikilink&quot;: true
      }
    }
  },
  &quot;url&quot;: &quot;my_cool_link.html?file=my_cool_link.lit&quot;,
  &quot;title&quot;: &quot;My cool ðŸ˜Ž link&quot;,
  &quot;children&quot;: [
    {
      &quot;type&quot;: &quot;text&quot;,
      &quot;value&quot;: &quot;My cool ðŸ˜Ž link&quot;
    }
  ]
}
</code></pre></output></codecell></div></cell><cell startpos="147:1-3923" endpos="187:4-4948" class="code output"><div class="cell-content"><codecell class="lang-txt local output"><span class="meta"><span class="lang">txt</span><span class="updatedAt">Updated <span class="Time relative">23.5h ago</span></span></span><output><pre><code class="txt">{ root: &#x27;/&#x27;,
  example: &#x27;testing/Links?foo=bar#baz&#x27;,
  resolved: [ &#x27;testing/linksfoobarbaz&#x27; ],
  link: 
   { type: &#x27;wikiLink&#x27;,
     data: { permalink: &#x27;testing/linksfoobarbaz&#x27; },
     url: &#x27;testing/Links?foo=bar#baz&#x27;,
     value: &#x27;testing/Links?foo=bar#baz&#x27; } }
{
  &quot;type&quot;: &quot;link&quot;,
  &quot;data&quot;: {
    &quot;isExternal&quot;: false,
    &quot;isAbsolute&quot;: false,
    &quot;isFragment&quot;: false,
    &quot;isRelative&quot;: true,
    &quot;canonical&quot;: &quot;testing/linksfoobarbaz.lit&quot;,
    &quot;wikilink&quot;: true,
    &quot;hProperties&quot;: {
      &quot;wikilink&quot;: true,
      &quot;data&quot;: {
        &quot;base&quot;: &quot;testing/linksfoobarbaz.html&quot;,
        &quot;isExternal&quot;: false,
        &quot;isAbsolute&quot;: false,
        &quot;isFragment&quot;: false,
        &quot;isRelative&quot;: true,
        &quot;canonical&quot;: &quot;testing/linksfoobarbaz.lit&quot;,
        &quot;wikilink&quot;: true
      }
    }
  },
  &quot;url&quot;: &quot;testing/linksfoobarbaz.html?file=testing/linksfoobarbaz.lit&quot;,
  &quot;title&quot;: &quot;testing/Links?foo=bar#baz&quot;,
  &quot;children&quot;: [
    {
      &quot;type&quot;: &quot;text&quot;,
      &quot;value&quot;: &quot;testing/Links?foo=bar#baz&quot;
    }
  ]
}
</code></pre></output></codecell></div></cell></section></div></div><div id="backlinks"><h4>Backlinks (3)</h4><ol><li><a title=".lit" href="/index.html">.lit</a></li><li><a title="ðŸ”¬ Tests, experiments and investigations" href="/testing/index.html">ðŸ”¬ Tests, experiments and investigations</a></li><li><a title="2021-05-25" href="/testing/log/2021-05-25.html">2021-05-25</a></li></ol></div><script src="//cdn.jsdelivr.net/npm/eruda"></script><script>eruda.init();</script><script async="" src="/web.bundle.js"></script></body></html>