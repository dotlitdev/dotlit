<html data-reactroot=""><head><title>unist-util-position-to-node</title><meta name="litsrc" value="unist-util-position-to-node.lit"/><meta name="litroot" value="/"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/><link rel="stylesheet" href="https://highlightjs.org/static/demo/styles/railscasts.css"/><link rel="stylesheet" href="/style.css"/></head><body><div id="lit-app"><div id="lit-header"><menu class="horizontal open has-children"><li class="MenuTitle"><a href="/">Home</a></li><li class="MenuItems"><menu class="has-children"><li class="MenuTitle">File</li></menu><menu class="has-children" disabled=""><li class="MenuTitle">Cell</li></menu><menu class="has-children" disabled=""><li class="MenuTitle">Section</li></menu><menu class="has-children"><li class="MenuTitle">Help</li></menu><menu class="has-children right"><li class="MenuTitle"><span class="led led-grey"></span></li></menu></li></menu><div class="lit-messages"></div></div><div id="content"><section depth="1" class="" startpos="1:1-0" endpos="10:37-286"><cell startpos="1:1-0" endpos="3:107-137"><div class="cell-content"><h1 id="unist-util-position-to-node">unist-util-position-to-node</h1><p>aka <code>unist-util-select-pos</code> Given a <em>Position</em> and an AST tree return the nodes that match the <em>Position</em>.</p></div></cell><section depth="2" class="" startpos="5:1-139" endpos="10:37-286"><cell startpos="5:1-139" endpos="10:37-286"><div class="cell-content"><h2 id="to-do">To Do</h2><ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled=""/> <!-- -->Line level precision</li>
<li class="task-list-item"><input type="checkbox" disabled=""/> <!-- -->Column level precision</li>
<li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->Try implement as filter test function<!-- -->
<ul>
<li>had to combine filter and select</li>
</ul>
</li>
</ul></div></cell></section></section>
<section depth="2" class="" startpos="12:1-288" endpos="71:4-1708"><cell startpos="12:1-288" endpos="12:10-297"><div class="cell-content"><h2 id="source">Source</h2></div></cell><cell startpos="14:1-299" endpos="41:4-1264" class="code"><div class="cell-content"><codecell class="lang-js local"><span class="meta"><span class="lang">js</span><span class="filename">./utils/unist-util-select-position.js</span></span><pre><code class="js">import filter from &#x27;unist-util-filter&#x27;
import {selectAll as select} from &#x27;unist-util-select&#x27;
import { getConsoleForNamespace } from &#x27;./console&#x27;

const console = getConsoleForNamespace(&#x27;util&#x27;)

// written from client
export const atPos = pos =&gt; (node) =&gt; {
  const pos2 = node.position
  const startInside = (pos2.start.line &gt;= pos.start.line
    &amp;&amp; pos2.start.line &lt;= pos.end.line)
  const endInside = (pos2.end.line &gt;= pos.start.line
    &amp;&amp; pos2.end.line &lt;= pos.end.line)
  const wraps = pos2.start.line &lt;= pos.start.line 
    &amp;&amp; pos2.end.line &gt;= pos.end.line

  const any = wraps || startInside || endInside 
  console.log(&quot;atPos: &quot; + node.type, any ,pos2.start.line, pos2.end.line, wraps, startInside, endInside, pos.start.line, pos.end.line)
  return any
}

export const selectAll = (type, pos, tree) =&gt; {
  const filteredTree = filter(tree, atPos(pos))
  const nodes = select(type, filteredTree)
  return nodes
}
</code></pre></codecell></div></cell><section depth="3" class="" startpos="44:1-1267" endpos="71:4-1708"><cell startpos="44:1-1267" endpos="46:35-1311"><div class="cell-content"><h3 id="misc">Misc</h3><p>Initial pass saved for reflection:</p></div></cell><cell startpos="48:1-1313" endpos="71:4-1708" class="code"><div class="cell-content"><codecell class="lang-js local"><span class="meta"><span class="lang">js</span><span class="filename">./utils/unist-util-position-to-node.js</span></span><pre><code class="js">export const positionToNode = (pos,tree) =&gt; {

  const start = pos.start
    ? pos.start
    : pos.line &amp;&amp; pos.column
      ? pos
      : undefined

  const end = pos.end
    ? pos.end
    : pos.line &amp;&amp; pos.column
      ? pos
      : undefined

  if (tree.position.start.line &gt;= end.line) {
    return undefined
  }

  if (tree.children) {

  }
}
</code></pre></codecell></div></cell></section></section></div></div><div id="backlinks"><h4>Backlinks (0)</h4><ol></ol></div><script src="//cdn.jsdelivr.net/npm/eruda"></script><script>eruda.init();</script><script src="/web.bundle.js"></script></body></html>