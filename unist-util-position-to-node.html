<html data-reactroot=""><head><title>unist-util-position-to-node</title><meta name="litsrc" value="unist-util-position-to-node.lit"/><meta name="litroot" value="/"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/><link rel="stylesheet" href="https://highlightjs.org/static/demo/styles/railscasts.css"/><link rel="stylesheet" href="/style.css"/></head><body><div id="app"><div id="header"><menu class="horizontal open has-children"><li class="MenuTitle"><a href="/">Home</a></li><li class="MenuItems"><menu class="has-children"><li class="MenuTitle">File</li></menu><menu class="has-children" disabled=""><li class="MenuTitle">Cell</li></menu><menu class="has-children" disabled=""><li class="MenuTitle">Section</li></menu><menu class="has-children"><li class="MenuTitle">Help</li></menu><menu class="has-children"><li class="MenuTitle"><span style="display:inline-block;width:0.6em;height:0.6em;border-radius:0.6em;margin-top:0.4em;background-color:#33cc33"></span></li></menu></li></menu></div><div id="content"><section startpos="1:1-0" endpos="71:4-1708" class=""><cell startpos="1:1-0" endpos="3:107-137"><h1 id="unist-util-position-to-node">unist-util-position-to-node</h1><p>aka <code>unist-util-select-pos</code> Given a <em>Position</em> and an AST tree return the nodes that match the <em>Position</em>.</p></cell><section startpos="5:1-139" endpos="71:4-1708" class=""><cell startpos="5:1-139" endpos="10:37-286"><h2 id="to-do">To Do</h2><ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled=""/> <!-- -->Line level precision</li>
<li class="task-list-item"><input type="checkbox" disabled=""/> <!-- -->Column level precision</li>
<li class="task-list-item"><input type="checkbox" checked="" disabled=""/> <!-- -->Try implement as filter test function<!-- -->
<ul>
<li>had to combine filter and select</li>
</ul>
</li>
</ul></cell><section startpos="12:1-288" endpos="71:4-1708" class=""><cell startpos="12:1-288" endpos="12:10-297"><h2 id="source">Source</h2></cell><cell startpos="14:1-299" endpos="41:4-1264" class="code"><codecell><span class="meta"><span class="lang">js</span><span class="filename">./utils/unist-util-select-position.js</span></span><pre><code class="js">import filter from &#x27;unist-util-filter&#x27;
import {selectAll as select} from &#x27;unist-util-select&#x27;
import { getConsoleForNamespace } from &#x27;./console&#x27;

const console = getConsoleForNamespace(&#x27;util&#x27;)

// written from client
export const atPos = pos =&gt; (node) =&gt; {
  const pos2 = node.position
  const startInside = (pos2.start.line &gt;= pos.start.line
    &amp;&amp; pos2.start.line &lt;= pos.end.line)
  const endInside = (pos2.end.line &gt;= pos.start.line
    &amp;&amp; pos2.end.line &lt;= pos.end.line)
  const wraps = pos2.start.line &lt;= pos.start.line 
    &amp;&amp; pos2.end.line &gt;= pos.end.line

  const any = wraps || startInside || endInside 
  console.log(&quot;atPos: &quot; + node.type, any ,pos2.start.line, pos2.end.line, wraps, startInside, endInside, pos.start.line, pos.end.line)
  return any
}

export const selectAll = (type, pos, tree) =&gt; {
  const filteredTree = filter(tree, atPos(pos))
  const nodes = select(type, filteredTree)
  return nodes
}
</code></pre></codecell></cell><section startpos="44:1-1267" endpos="71:4-1708" class=""><cell startpos="44:1-1267" endpos="46:35-1311"><h3 id="misc">Misc</h3><p>Initial pass saved for reflection:</p></cell><cell startpos="48:1-1313" endpos="71:4-1708" class="code"><codecell><span class="meta"><span class="lang">js</span><span class="filename">./utils/unist-util-position-to-node.js</span></span><pre><code class="js">export const positionToNode = (pos,tree) =&gt; {

  const start = pos.start
    ? pos.start
    : pos.line &amp;&amp; pos.column
      ? pos
      : undefined

  const end = pos.end
    ? pos.end
    : pos.line &amp;&amp; pos.column
      ? pos
      : undefined

  if (tree.position.start.line &gt;= end.line) {
    return undefined
  }

  if (tree.children) {

  }
}
</code></pre></codecell></cell></section></section></section></section></div></div><div id="backlinks"><h4>Backlinks (1)</h4><ol><li><a title=".lit" href="/index.html">.lit</a></li></ol></div><script src="//cdn.jsdelivr.net/npm/eruda"></script><script>eruda.init();</script><script src="/web.bundle.js"></script></body></html>