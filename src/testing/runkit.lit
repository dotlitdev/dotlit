# testing/runkit.lit

Experimenting using RunKit as a custom repl for nodejs. 

## Embed

Lets start with just the simple [demo embed,](https://runkit.com/docs/embed) adding the embed script and a container below.

```script https://embed.runkit.com !inline
// inject https://embed.runkit.com
```

```html !inline
<!-- anywhere else on your page -->
<div id="my-element">A container to hold the embed. <br/>Run #init cell below ðŸ‘‡ to populate it.</div>
```



```js #init !collapse
return RunKit.createNotebook({
    // the parent element for the new notebook
    element: document.getElementById("my-element"),
    onEvaluate: (...args) => alert(JSON.stringify([...args])),
    // specify the source of the notebook
    source: "// GeoJSON!\nvar getJSON = require(\"async-get-json\");\n\nawait getJSON(\"https://storage.googleapis.com/maps-devrel/google.json\");"
})
```
```>txt attached=true updated=1620996024770
{ onEvaluate: [Function: onEvaluate],
  onLoad: undefined,
  onResize: undefined,
  onSave: undefined,
  onURLChanged: undefined,
  UUID: 1,
  name: 'runkit-embed-1',
  URL: null,
  endpointURL: null }
```

react bindings for simple embed: https://github.com/runkitdev/react-runkit and trying out https://runkit.com/docs/endpoint


```jsx babel=true react=true repl=js !below #react #endpoint 
return (async fn => {

  const React = lit.utils.React
  const Embed = (await import('https://cdn.skypack.dev/runkit-embed-react')).default

  const helloSource = `exports.endpoint = function(request, response) {
    response.end("Hello world! From .lit and Nodejs thanks to RunKit.");
}`

  const onLoad = (...args) => alert(JSON.stringify([...args]))

  return <Embed
            mode='endpoint'
            readOnly={true}
            evaluateOnLoad={true}
            // hidesActionButton={true}
            source={ helloSource } 
            // ref='embed'
            onLoad={ onLoad } 
          />

})()
```

```uri !below
https://2mkz0r1anfrl.runkit.sh/
```
```jsx RunKit.jsx !plugin of=nodejs
export const viewer = ({node,React}) => {

  const Embed = (await import('https://cdn.skypack.dev/runkit-embed-react')).default

  const onLoad = (...args) => alert(JSON.stringify([...args]))

  return <Embed
            mode='endpoint'
            readOnly={true}
            evaluateOnLoad={true}
            // hidesActionButton={true}
            source={ node.data.value } 
            // ref='embed'
            onLoad={ onLoad } 
          />

}
```

```>nodejs
exports.endpoint = function(req, res) {
    res.end("Hello world! From .lit and Nodejs thanks to RunKit.");
}
```