<html data-reactroot=""><head><title>github_workflows</title><meta name="litsrc" value="github_workflows.lit"/><meta name="litroot" value="."/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/><link rel="stylesheet" href="style.css"/></head><body><div id="header"><header><a href=".">Home</a><span>Debug</span></header></div><div id="app"><div id="content"><section name="github-workflows"><cell startpos="1:1-0" endpos="1:19-18"><h1 id="github-workflows">GitHub Workflows</h1></cell><section name="deploy"><cell startpos="3:1-20" endpos="3:10-29"><h2 id="deploy">Deploy</h2></cell><cell startpos="5:1-31" endpos="6:4-76" class="code"><codecell><span class="meta"><span class="lang">yaml</span><span class="repl"></span><span class="filename"></span></span><pre><code class="" meta="[object Object]">name: Deploy  

# Controls when the action will run. Triggers the workflow on push or pull request
# events but only for the master branch
on:
  workflow_dispatch:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called &quot;deploy&quot;
  deploy:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v2

      - name: Use Node.js
        uses: actions/setup-node@v1
        with:
          node-version: &#x27;14.x&#x27;
    
      - name: Generate gh-pages from source
        run: |
          npm install
          npm install -g .
          npm run build-web
          mkdir build
          dotlit generate ./src -o ./build

      - name: Deploy ðŸš€
        uses: JamesIves/github-pages-deploy-action@3.7.1
        with:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          BRANCH: gh-pages # The branch the action should deploy to.
          FOLDER: build # The folder the action should deploy.
          CLEAN: true # Automatically remove deleted files from the deploy branch
     

</code></pre></codecell></cell><section name="npm-publish"><cell startpos="8:1-78" endpos="8:15-92"><h2 id="npm-publish">NPM Publish</h2></cell><cell startpos="10:1-94" endpos="11:4-142" class="code"><codecell><span class="meta"><span class="lang">yaml</span><span class="repl"></span><span class="filename"></span></span><pre><code class="" meta="[object Object]">name: npm-publish
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  npm-publish:
    name: npm-publish
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@master
    - name: Set up Node.js
      uses: actions/setup-node@master
      with:
        node-version: &#x27;14.x&#x27;
        registry-url: &#x27;https://registry.npmjs.org&#x27;
    - name: Publish Npm
      env:
          NODE_AUTH_TOKEN: ${{ secrets.NPM_AUTH_TOKEN }}
      run: |
        PUBLISHED_VERSION=$(npm view @dotlit/dotlit version)
        LOCAL_VERSION=$(node -p &quot;require(&#x27;./package.json&#x27;).version&quot;)
        if [ &quot;$PUBLISHED_VERSION&quot; = &quot;$LOCAL_VERSION&quot; ]; then
            echo &quot;No new version to publish. Latest is: $PUBLISHED_VERSION&quot;
        else
            npm install
            npm run build
            npm publish --access public
        fi

</code></pre></codecell></cell></section></section></section></div></div><div id="backlinks"><h4>Backlinks (1)</h4><ol><li><a title=".lit" href="index.html">.lit</a></li></ol></div><script src="//cdn.jsdelivr.net/npm/eruda"></script><script>eruda.init();</script><script src="web.bundle.js"></script></body></html>