<html data-reactroot=""><head><title>viewers</title><meta name="litsrc" value="renderer/viewers.lit"/><meta name="litroot" value="/"/><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/><link rel="stylesheet" href="https://highlightjs.org/static/demo/styles/railscasts.css"/><link rel="stylesheet" href="/style.css"/></head><body><div id="lit-app"><div id="header"><menu class="horizontal open has-children"><li class="MenuTitle"><a href="/">Home</a></li><li class="MenuItems"><menu class="has-children"><li class="MenuTitle">File</li></menu><menu class="has-children" disabled=""><li class="MenuTitle">Cell</li></menu><menu class="has-children" disabled=""><li class="MenuTitle">Section</li></menu><menu class="has-children"><li class="MenuTitle">Help</li></menu><menu class="has-children right"><li class="MenuTitle"><span class="led led-grey"></span></li></menu></li></menu></div><div id="content"><section depth="1" class="" startpos="1:1-0" endpos="3:21-38"><cell startpos="1:1-0" endpos="1:17-16"><h1 id="custom-viewers">Custom Viewers</h1></cell><section depth="2" class="" startpos="3:1-18" endpos="3:21-38"><cell startpos="3:1-18" endpos="3:21-38"><h2 id="table-of-contents">Table of Contents</h2><ul>
<li>
<p><a href="#examples">Examples</a></p>
<ul>
<li><a href="#example-basic-foo-viewer">Example: Basic <code>foo</code> viewer</a></li>
<li><a href="#example-meta-viewer">Example: <code>meta</code> viewer</a></li>
</ul>
</li>
<li>
<p><a href="#errors">Errors</a></p>
<ul>
<li><a href="#runtime">Runtime</a></li>
</ul>
</li>
<li>
<p><a href="#initial-prototype">Initial prototype</a></p>
</li>
</ul></cell></section></section>
<section depth="2" class="" startpos="5:1-40" endpos="38:4-428"><cell startpos="5:1-40" endpos="5:12-51"><h2 id="examples">Examples</h2></cell><section depth="3" class="" startpos="7:1-53" endpos="38:4-428"><cell startpos="7:1-53" endpos="7:32-84"><h3 id="example-basic-foo-viewer">Example: Basic <code>foo</code> viewer</h3></cell><cell startpos="9:1-86" endpos="13:4-205" class="code"><codecell class="local"><span class="meta"><span class="lang">js</span><ul class="directives"><li><span class="directive">viewer</span></li></ul></span><pre><code class="js">export const viewer = ({value}, {React}) =&gt; {
  return `${value} Foooooo! React: ${!!React}`
}
</code></pre></codecell></cell><cell startpos="16:1-208" endpos="16:30-237"><p>Not used in the default case:</p></cell><cell startpos="18:1-239" endpos="20:4-253" class="code"><codecell class="local"><span class="meta"><span class="lang">foo</span></span><pre><code class="foo">Bar
</code></pre></codecell></cell><cell startpos="22:1-255" endpos="22:41-295"><p>Only when using the <code>!inline</code> directive:</p></cell><cell startpos="24:1-297" endpos="26:4-319" class="code"><codecell class="local"><span class="meta"><span class="lang">foo</span><ul class="directives"><li><span class="directive">inline</span></li></ul></span><pre><code class="foo">Baz
</code></pre></codecell></cell><cell startpos="28:1-321" endpos="28:38-358"><p>or <code>viewer=xxx</code> attribute is present:</p></cell><cell startpos="30:1-360" endpos="32:4-385" class="code"><codecell class="local"><span class="meta"><span class="lang">foo</span></span><pre><code class="foo">Quz
</code></pre></codecell></cell><cell startpos="34:1-387" endpos="34:25-411"><p>or it is an output cell:</p></cell><cell startpos="36:1-413" endpos="38:4-428" class="code"><codecell class="local"><span class="meta"><span class="lang">foo</span></span><output><pre><code class="foo">Qux
</code></pre></output></codecell></cell></section></section>
<section depth="3" class="" startpos="40:1-430" endpos="51:4-712"><cell startpos="40:1-430" endpos="40:27-456"><h3 id="example-meta-viewer">Example: <code>meta</code> viewer</h3></cell><cell startpos="42:1-458" endpos="47:4-618" class="code"><codecell class="local"><span class="meta"><span class="lang">js</span><ul class="directives"><li><span class="directive">viewer</span></li></ul></span><pre><code class="js">export const viewer = (node,{React}) =&gt; {
  const view = React.createElement(&#x27;pre&#x27;, null, JSON.stringify(node,null,2))
  return view
}
</code></pre></codecell></cell><cell startpos="49:1-620" endpos="51:4-712" class="code"><codecell class="local"><span class="meta"><span class="lang">txt</span><span class="filename">file.txt</span><ul class="tags"><li><span class="tag">example</span></li></ul><ul class="directives"><li><span class="directive">inline</span></li></ul></span><pre><code class="txt">show meta content instead
</code></pre></codecell></cell></section>
<section depth="2" class="" startpos="53:1-714" endpos="69:4-1122"><cell startpos="53:1-714" endpos="53:10-723"><h2 id="errors">Errors</h2></cell><section depth="3" class="" startpos="55:1-725" endpos="69:4-1122"><cell startpos="55:1-725" endpos="55:12-736"><h3 id="runtime">Runtime</h3></cell><cell startpos="57:1-738" endpos="61:4-851" class="code"><codecell class="local"><span class="meta"><span class="lang">js</span><ul class="directives"><li><span class="directive">viewer</span></li></ul></span><pre><code class="js">export const viewer = (node) =&gt; {
  throw new Error(&quot;Test Error: Broken Viewer&quot;)
}
</code></pre></codecell></cell><cell startpos="62:1-852" endpos="62:140-991"><p>The above viewer breaks the document render, destroying the page, but therefore use of it is not persisted. Consider adding <code>ErrorBoundry</code>.</p></cell><cell startpos="64:1-993" endpos="69:4-1122" class="code"><codecell class="local"><span class="meta"><span class="lang">js</span><ul class="directives"><li><span class="directive">viewer</span></li></ul></span><pre><code class="js">throw new Error(&quot;Test Error: Broken Viewer&quot;)
export const viewer = (node) =&gt; {
  return &quot;never&quot;
}
</code></pre></codecell></cell></section></section>
<section depth="2" class="" startpos="71:1-1124" endpos="94:4-1560"><cell startpos="71:1-1124" endpos="71:21-1144"><h2 id="initial-prototype">Initial prototype</h2></cell><cell startpos="73:1-1146" endpos="94:4-1560" class="code"><codecell class="local"><span class="meta"><span class="lang">html</span></span><pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Test page&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
  &lt;script type=&quot;module&quot;&gt;

    async function getViewer(src) {
      const module = await import(`data:text/javascript;base64,${ btoa(src)}`);
      return module.viewer;
    }

    getViewer(`export const viewer = () =&gt; &quot;foo!&quot;`).then(viewer =&gt; {
       alert(&quot;Got viewer &quot; + !!viewer)
    })

  &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre></codecell></cell></section></div></div><div id="backlinks"><h4>Backlinks (2)</h4><ol><li><a title=".lit" href="/index.html">.lit</a></li><li><a title="Statch Pad" href="/scratch_pad.html">Statch Pad</a></li></ol></div><script src="//cdn.jsdelivr.net/npm/eruda"></script><script>eruda.init();</script><script src="/web.bundle.js"></script></body></html>